(()=>{var e={283:()=>{var e,t,i;e={847:e=>{e.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}},739:(e,t)=>{t.assign=function(e){e=e||{};var t,i,r,n=Array.prototype.slice.call(arguments).slice(1);for(t=0,r=n.length;t<r;t++)if(n[t])for(i in n[t])e[i]=n[t][i];return e},t.validateSettings=function(e){return"linLogMode"in e&&"boolean"!=typeof e.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in e&&"boolean"!=typeof e.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in e&&"boolean"!=typeof e.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in e&&"number"!=typeof e.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:!("scalingRatio"in e)||"number"==typeof e.scalingRatio&&e.scalingRatio>=0?"strongGravityMode"in e&&"boolean"!=typeof e.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:!("gravity"in e)||"number"==typeof e.gravity&&e.gravity>=0?"slowDown"in e&&!("number"==typeof e.slowDown||e.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in e&&"boolean"!=typeof e.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:!("barnesHutTheta"in e)||"number"==typeof e.barnesHutTheta&&e.barnesHutTheta>=0?null:{message:"the `barnesHutTheta` setting should be a number >= 0."}:{message:"the `gravity` setting should be a number >= 0."}:{message:"the `scalingRatio` setting should be a number >= 0."}},t.graphToByteArrays=function(e,t){var i,r=e.order,n=e.size,o={},s=new Float32Array(10*r),a=new Float32Array(3*n);return i=0,e.forEachNode((function(t,r){o[t]=i,s[i]=r.x,s[i+1]=r.y,s[i+2]=0,s[i+3]=0,s[i+4]=0,s[i+5]=0,s[i+6]=1+e.degree(t),s[i+7]=1,s[i+8]=r.size||1,s[i+9]=r.fixed?1:0,i+=10})),i=0,e.forEachEdge((function(e,r,n,s){a[i]=o[n],a[i+1]=o[s],a[i+2]=function(e){if(!t)return 1;var i=e[t];return("number"!=typeof i||isNaN(i))&&(i=1),i}(r),i+=3})),{nodes:s,edges:a}},t.assignLayoutChanges=function(e,t){var i=0;e.updateEachNodeAttributes((function(e,r){return r.x=t[i],r.y=t[i+1],i+=10,r}),{attributes:["x","y"]})},t.collectLayoutChanges=function(e,t){for(var i=e.nodes(),r={},n=0,o=0,s=t.length;n<s;n+=10)r[i[o]]={x:t[n],y:t[n+1]},o++;return r},t.createWorker=function(e){var t=window.URL||window.webkitURL,i=e.toString(),r=t.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),n=new Worker(r);return t.revokeObjectURL(r),n}},404:(e,t,i)=>{var r=i(186),n=i(810),o=i(739),s=i(847);function a(e,t,i){if(!r(t))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");"number"==typeof i&&(i={iterations:i});var a=i.iterations;if("number"!=typeof a)throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(a<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=i.attributes||{},d=i.weighted?h.weight||"weight":null,u=o.assign({},s,i.settings),c=o.validateSettings(u);if(c)throw new Error("graphology-layout-forceatlas2: "+c.message);var l,p=o.graphToByteArrays(t,d);for(l=0;l<a;l++)n(u,p.nodes,p.edges);if(!e)return o.collectLayoutChanges(t,p.nodes);o.assignLayoutChanges(t,p.nodes)}var h=a.bind(null,!1);h.assign=a.bind(null,!0),h.inferSettings=function(e){var t="number"==typeof e?e:e.order;return{barnesHutOptimize:t>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(t)}},e.exports=h},810:e=>{var t=10;e.exports=function(e,i,r){var n,o,s,a,h,d,u,c,l,p,f,g,m,y,b,v,_,w,x,E,A,L,k,S=i.length,M=r.length,C=e.adjustSizes,$=e.barnesHutTheta*e.barnesHutTheta,N=[];for(s=0;s<S;s+=t)i[s+4]=i[s+2],i[s+5]=i[s+3],i[s+2]=0,i[s+3]=0;if(e.outboundAttractionDistribution){for(f=0,s=0;s<S;s+=t)f+=i[s+6];f/=S/t}if(e.barnesHutOptimize){var T,G,O,D=1/0,P=-1/0,R=1/0,z=-1/0;for(s=0;s<S;s+=t)D=Math.min(D,i[s+0]),P=Math.max(P,i[s+0]),R=Math.min(R,i[s+1]),z=Math.max(z,i[s+1]);var F=P-D,j=z-R;for(F>j?z=(R-=(F-j)/2)+F:P=(D-=(j-F)/2)+j,N[0]=-1,N[1]=(D+P)/2,N[2]=(R+z)/2,N[3]=Math.max(P-D,z-R),N[4]=-1,N[5]=-1,N[6]=0,N[7]=0,N[8]=0,n=1,s=0;s<S;s+=t)for(o=0,O=3;;){if(!(N[o+5]>=0)){if(N[o+0]<0){N[o+0]=s;break}if(N[o+5]=9*n,c=N[o+3]/2,N[(l=N[o+5])+0]=-1,N[l+1]=N[o+1]-c,N[l+2]=N[o+2]-c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]-c,N[l+2]=N[o+2]+c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]+c,N[l+2]=N[o+2]-c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]+c,N[l+2]=N[o+2]+c,N[l+3]=c,N[l+4]=N[o+4],N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,n+=4,T=i[N[o+0]+0]<N[o+1]?i[N[o+0]+1]<N[o+2]?N[o+5]:N[o+5]+9:i[N[o+0]+1]<N[o+2]?N[o+5]+18:N[o+5]+27,N[o+6]=i[N[o+0]+6],N[o+7]=i[N[o+0]+0],N[o+8]=i[N[o+0]+1],N[T+0]=N[o+0],N[o+0]=-1,T===(G=i[s+0]<N[o+1]?i[s+1]<N[o+2]?N[o+5]:N[o+5]+9:i[s+1]<N[o+2]?N[o+5]+18:N[o+5]+27)){if(O--){o=T;continue}O=3;break}N[G+0]=s;break}T=i[s+0]<N[o+1]?i[s+1]<N[o+2]?N[o+5]:N[o+5]+9:i[s+1]<N[o+2]?N[o+5]+18:N[o+5]+27,N[o+7]=(N[o+7]*N[o+6]+i[s+0]*i[s+6])/(N[o+6]+i[s+6]),N[o+8]=(N[o+8]*N[o+6]+i[s+1]*i[s+6])/(N[o+6]+i[s+6]),N[o+6]+=i[s+6],o=T}}if(e.barnesHutOptimize){for(g=e.scalingRatio,s=0;s<S;s+=t)for(o=0;;)if(N[o+5]>=0){if(v=Math.pow(i[s+0]-N[o+7],2)+Math.pow(i[s+1]-N[o+8],2),4*(p=N[o+3])*p/v<$){if(m=i[s+0]-N[o+7],y=i[s+1]-N[o+8],!0===C?v>0?(_=g*i[s+6]*N[o+6]/v,i[s+2]+=m*_,i[s+3]+=y*_):v<0&&(_=-g*i[s+6]*N[o+6]/Math.sqrt(v),i[s+2]+=m*_,i[s+3]+=y*_):v>0&&(_=g*i[s+6]*N[o+6]/v,i[s+2]+=m*_,i[s+3]+=y*_),(o=N[o+4])<0)break;continue}o=N[o+5]}else if((d=N[o+0])>=0&&d!==s&&(v=(m=i[s+0]-i[d+0])*m+(y=i[s+1]-i[d+1])*y,!0===C?v>0?(_=g*i[s+6]*i[d+6]/v,i[s+2]+=m*_,i[s+3]+=y*_):v<0&&(_=-g*i[s+6]*i[d+6]/Math.sqrt(v),i[s+2]+=m*_,i[s+3]+=y*_):v>0&&(_=g*i[s+6]*i[d+6]/v,i[s+2]+=m*_,i[s+3]+=y*_)),(o=N[o+4])<0)break}else for(g=e.scalingRatio,a=0;a<S;a+=t)for(h=0;h<a;h+=t)m=i[a+0]-i[h+0],y=i[a+1]-i[h+1],!0===C?(v=Math.sqrt(m*m+y*y)-i[a+8]-i[h+8])>0?(_=g*i[a+6]*i[h+6]/v/v,i[a+2]+=m*_,i[a+3]+=y*_,i[h+2]+=m*_,i[h+3]+=y*_):v<0&&(_=100*g*i[a+6]*i[h+6],i[a+2]+=m*_,i[a+3]+=y*_,i[h+2]-=m*_,i[h+3]-=y*_):(v=Math.sqrt(m*m+y*y))>0&&(_=g*i[a+6]*i[h+6]/v/v,i[a+2]+=m*_,i[a+3]+=y*_,i[h+2]-=m*_,i[h+3]-=y*_);for(l=e.gravity/e.scalingRatio,g=e.scalingRatio,s=0;s<S;s+=t)_=0,m=i[s+0],y=i[s+1],v=Math.sqrt(Math.pow(m,2)+Math.pow(y,2)),e.strongGravityMode?v>0&&(_=g*i[s+6]*l):v>0&&(_=g*i[s+6]*l/v),i[s+2]-=m*_,i[s+3]-=y*_;for(g=1*(e.outboundAttractionDistribution?f:1),u=0;u<M;u+=3)a=r[u+0],h=r[u+1],c=r[u+2],b=Math.pow(c,e.edgeWeightInfluence),m=i[a+0]-i[h+0],y=i[a+1]-i[h+1],!0===C?(v=Math.sqrt(Math.pow(m,2)+Math.pow(y,2)-i[a+8]-i[h+8]),e.linLogMode?e.outboundAttractionDistribution?v>0&&(_=-g*b*Math.log(1+v)/v/i[a+6]):v>0&&(_=-g*b*Math.log(1+v)/v):e.outboundAttractionDistribution?v>0&&(_=-g*b/i[a+6]):v>0&&(_=-g*b)):(v=Math.sqrt(Math.pow(m,2)+Math.pow(y,2)),e.linLogMode?e.outboundAttractionDistribution?v>0&&(_=-g*b*Math.log(1+v)/v/i[a+6]):v>0&&(_=-g*b*Math.log(1+v)/v):e.outboundAttractionDistribution?(v=1,_=-g*b/i[a+6]):(v=1,_=-g*b)),v>0&&(i[a+2]+=m*_,i[a+3]+=y*_,i[h+2]-=m*_,i[h+3]-=y*_);if(!0===C)for(s=0;s<S;s+=t)1!==i[s+9]&&((w=Math.sqrt(Math.pow(i[s+2],2)+Math.pow(i[s+3],2)))>10&&(i[s+2]=10*i[s+2]/w,i[s+3]=10*i[s+3]/w),x=i[s+6]*Math.sqrt((i[s+4]-i[s+2])*(i[s+4]-i[s+2])+(i[s+5]-i[s+3])*(i[s+5]-i[s+3])),E=Math.sqrt((i[s+4]+i[s+2])*(i[s+4]+i[s+2])+(i[s+5]+i[s+3])*(i[s+5]+i[s+3]))/2,A=.1*Math.log(1+E)/(1+Math.sqrt(x)),L=i[s+0]+i[s+2]*(A/e.slowDown),i[s+0]=L,k=i[s+1]+i[s+3]*(A/e.slowDown),i[s+1]=k);else for(s=0;s<S;s+=t)1!==i[s+9]&&(x=i[s+6]*Math.sqrt((i[s+4]-i[s+2])*(i[s+4]-i[s+2])+(i[s+5]-i[s+3])*(i[s+5]-i[s+3])),E=Math.sqrt((i[s+4]+i[s+2])*(i[s+4]+i[s+2])+(i[s+5]+i[s+3])*(i[s+5]+i[s+3]))/2,A=i[s+7]*Math.log(1+E)/(1+Math.sqrt(x)),i[s+7]=Math.min(1,Math.sqrt(A*(Math.pow(i[s+2],2)+Math.pow(i[s+3],2))/(1+Math.sqrt(x)))),L=i[s+0]+i[s+2]*(A/e.slowDown),i[s+0]=L,k=i[s+1]+i[s+3]*(A/e.slowDown),i[s+1]=k);return{}}},186:e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}}},t={},i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}(404),self.FA2=i},922:()=>{var e,t,i;e={847:e=>{e.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}},739:(e,t)=>{t.assign=function(e){e=e||{};var t,i,r,n=Array.prototype.slice.call(arguments).slice(1);for(t=0,r=n.length;t<r;t++)if(n[t])for(i in n[t])e[i]=n[t][i];return e},t.validateSettings=function(e){return"linLogMode"in e&&"boolean"!=typeof e.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in e&&"boolean"!=typeof e.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in e&&"boolean"!=typeof e.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in e&&"number"!=typeof e.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:!("scalingRatio"in e)||"number"==typeof e.scalingRatio&&e.scalingRatio>=0?"strongGravityMode"in e&&"boolean"!=typeof e.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:!("gravity"in e)||"number"==typeof e.gravity&&e.gravity>=0?"slowDown"in e&&!("number"==typeof e.slowDown||e.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in e&&"boolean"!=typeof e.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:!("barnesHutTheta"in e)||"number"==typeof e.barnesHutTheta&&e.barnesHutTheta>=0?null:{message:"the `barnesHutTheta` setting should be a number >= 0."}:{message:"the `gravity` setting should be a number >= 0."}:{message:"the `scalingRatio` setting should be a number >= 0."}},t.graphToByteArrays=function(e,t){var i,r=e.order,n=e.size,o={},s=new Float32Array(10*r),a=new Float32Array(3*n);return i=0,e.forEachNode((function(t,r){o[t]=i,s[i]=r.x,s[i+1]=r.y,s[i+2]=0,s[i+3]=0,s[i+4]=0,s[i+5]=0,s[i+6]=1+e.degree(t),s[i+7]=1,s[i+8]=r.size||1,s[i+9]=r.fixed?1:0,i+=10})),i=0,e.forEachEdge((function(e,r,n,s){a[i]=o[n],a[i+1]=o[s],a[i+2]=function(e){if(!t)return 1;var i=e[t];return("number"!=typeof i||isNaN(i))&&(i=1),i}(r),i+=3})),{nodes:s,edges:a}},t.assignLayoutChanges=function(e,t){var i=0;e.updateEachNodeAttributes((function(e,r){return r.x=t[i],r.y=t[i+1],i+=10,r}),{attributes:["x","y"]})},t.collectLayoutChanges=function(e,t){for(var i=e.nodes(),r={},n=0,o=0,s=t.length;n<s;n+=10)r[i[o]]={x:t[n],y:t[n+1]},o++;return r},t.createWorker=function(e){var t=window.URL||window.webkitURL,i=e.toString(),r=t.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),n=new Worker(r);return t.revokeObjectURL(r),n}},928:e=>{e.exports=function(){var e,t,i,r={};i=10,r.exports=function(e,t,r){var n,o,s,a,h,d,u,c,l,p,f,g,m,y,b,v,_,w,x,E,A,L,k,S=t.length,M=r.length,C=e.adjustSizes,$=e.barnesHutTheta*e.barnesHutTheta,N=[];for(s=0;s<S;s+=i)t[s+4]=t[s+2],t[s+5]=t[s+3],t[s+2]=0,t[s+3]=0;if(e.outboundAttractionDistribution){for(f=0,s=0;s<S;s+=i)f+=t[s+6];f/=S/i}if(e.barnesHutOptimize){var T,G,O,D=1/0,P=-1/0,R=1/0,z=-1/0;for(s=0;s<S;s+=i)D=Math.min(D,t[s+0]),P=Math.max(P,t[s+0]),R=Math.min(R,t[s+1]),z=Math.max(z,t[s+1]);var F=P-D,j=z-R;for(F>j?z=(R-=(F-j)/2)+F:P=(D-=(j-F)/2)+j,N[0]=-1,N[1]=(D+P)/2,N[2]=(R+z)/2,N[3]=Math.max(P-D,z-R),N[4]=-1,N[5]=-1,N[6]=0,N[7]=0,N[8]=0,n=1,s=0;s<S;s+=i)for(o=0,O=3;;){if(!(N[o+5]>=0)){if(N[o+0]<0){N[o+0]=s;break}if(N[o+5]=9*n,c=N[o+3]/2,N[(l=N[o+5])+0]=-1,N[l+1]=N[o+1]-c,N[l+2]=N[o+2]-c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]-c,N[l+2]=N[o+2]+c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]+c,N[l+2]=N[o+2]-c,N[l+3]=c,N[l+4]=l+9,N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,N[(l+=9)+0]=-1,N[l+1]=N[o+1]+c,N[l+2]=N[o+2]+c,N[l+3]=c,N[l+4]=N[o+4],N[l+5]=-1,N[l+6]=0,N[l+7]=0,N[l+8]=0,n+=4,T=t[N[o+0]+0]<N[o+1]?t[N[o+0]+1]<N[o+2]?N[o+5]:N[o+5]+9:t[N[o+0]+1]<N[o+2]?N[o+5]+18:N[o+5]+27,N[o+6]=t[N[o+0]+6],N[o+7]=t[N[o+0]+0],N[o+8]=t[N[o+0]+1],N[T+0]=N[o+0],N[o+0]=-1,T===(G=t[s+0]<N[o+1]?t[s+1]<N[o+2]?N[o+5]:N[o+5]+9:t[s+1]<N[o+2]?N[o+5]+18:N[o+5]+27)){if(O--){o=T;continue}O=3;break}N[G+0]=s;break}T=t[s+0]<N[o+1]?t[s+1]<N[o+2]?N[o+5]:N[o+5]+9:t[s+1]<N[o+2]?N[o+5]+18:N[o+5]+27,N[o+7]=(N[o+7]*N[o+6]+t[s+0]*t[s+6])/(N[o+6]+t[s+6]),N[o+8]=(N[o+8]*N[o+6]+t[s+1]*t[s+6])/(N[o+6]+t[s+6]),N[o+6]+=t[s+6],o=T}}if(e.barnesHutOptimize){for(g=e.scalingRatio,s=0;s<S;s+=i)for(o=0;;)if(N[o+5]>=0){if(v=Math.pow(t[s+0]-N[o+7],2)+Math.pow(t[s+1]-N[o+8],2),4*(p=N[o+3])*p/v<$){if(m=t[s+0]-N[o+7],y=t[s+1]-N[o+8],!0===C?v>0?(_=g*t[s+6]*N[o+6]/v,t[s+2]+=m*_,t[s+3]+=y*_):v<0&&(_=-g*t[s+6]*N[o+6]/Math.sqrt(v),t[s+2]+=m*_,t[s+3]+=y*_):v>0&&(_=g*t[s+6]*N[o+6]/v,t[s+2]+=m*_,t[s+3]+=y*_),(o=N[o+4])<0)break;continue}o=N[o+5]}else if((d=N[o+0])>=0&&d!==s&&(v=(m=t[s+0]-t[d+0])*m+(y=t[s+1]-t[d+1])*y,!0===C?v>0?(_=g*t[s+6]*t[d+6]/v,t[s+2]+=m*_,t[s+3]+=y*_):v<0&&(_=-g*t[s+6]*t[d+6]/Math.sqrt(v),t[s+2]+=m*_,t[s+3]+=y*_):v>0&&(_=g*t[s+6]*t[d+6]/v,t[s+2]+=m*_,t[s+3]+=y*_)),(o=N[o+4])<0)break}else for(g=e.scalingRatio,a=0;a<S;a+=i)for(h=0;h<a;h+=i)m=t[a+0]-t[h+0],y=t[a+1]-t[h+1],!0===C?(v=Math.sqrt(m*m+y*y)-t[a+8]-t[h+8])>0?(_=g*t[a+6]*t[h+6]/v/v,t[a+2]+=m*_,t[a+3]+=y*_,t[h+2]+=m*_,t[h+3]+=y*_):v<0&&(_=100*g*t[a+6]*t[h+6],t[a+2]+=m*_,t[a+3]+=y*_,t[h+2]-=m*_,t[h+3]-=y*_):(v=Math.sqrt(m*m+y*y))>0&&(_=g*t[a+6]*t[h+6]/v/v,t[a+2]+=m*_,t[a+3]+=y*_,t[h+2]-=m*_,t[h+3]-=y*_);for(l=e.gravity/e.scalingRatio,g=e.scalingRatio,s=0;s<S;s+=i)_=0,m=t[s+0],y=t[s+1],v=Math.sqrt(Math.pow(m,2)+Math.pow(y,2)),e.strongGravityMode?v>0&&(_=g*t[s+6]*l):v>0&&(_=g*t[s+6]*l/v),t[s+2]-=m*_,t[s+3]-=y*_;for(g=1*(e.outboundAttractionDistribution?f:1),u=0;u<M;u+=3)a=r[u+0],h=r[u+1],c=r[u+2],b=Math.pow(c,e.edgeWeightInfluence),m=t[a+0]-t[h+0],y=t[a+1]-t[h+1],!0===C?(v=Math.sqrt(Math.pow(m,2)+Math.pow(y,2)-t[a+8]-t[h+8]),e.linLogMode?e.outboundAttractionDistribution?v>0&&(_=-g*b*Math.log(1+v)/v/t[a+6]):v>0&&(_=-g*b*Math.log(1+v)/v):e.outboundAttractionDistribution?v>0&&(_=-g*b/t[a+6]):v>0&&(_=-g*b)):(v=Math.sqrt(Math.pow(m,2)+Math.pow(y,2)),e.linLogMode?e.outboundAttractionDistribution?v>0&&(_=-g*b*Math.log(1+v)/v/t[a+6]):v>0&&(_=-g*b*Math.log(1+v)/v):e.outboundAttractionDistribution?(v=1,_=-g*b/t[a+6]):(v=1,_=-g*b)),v>0&&(t[a+2]+=m*_,t[a+3]+=y*_,t[h+2]-=m*_,t[h+3]-=y*_);if(!0===C)for(s=0;s<S;s+=i)1!==t[s+9]&&((w=Math.sqrt(Math.pow(t[s+2],2)+Math.pow(t[s+3],2)))>10&&(t[s+2]=10*t[s+2]/w,t[s+3]=10*t[s+3]/w),x=t[s+6]*Math.sqrt((t[s+4]-t[s+2])*(t[s+4]-t[s+2])+(t[s+5]-t[s+3])*(t[s+5]-t[s+3])),E=Math.sqrt((t[s+4]+t[s+2])*(t[s+4]+t[s+2])+(t[s+5]+t[s+3])*(t[s+5]+t[s+3]))/2,A=.1*Math.log(1+E)/(1+Math.sqrt(x)),L=t[s+0]+t[s+2]*(A/e.slowDown),t[s+0]=L,k=t[s+1]+t[s+3]*(A/e.slowDown),t[s+1]=k);else for(s=0;s<S;s+=i)1!==t[s+9]&&(x=t[s+6]*Math.sqrt((t[s+4]-t[s+2])*(t[s+4]-t[s+2])+(t[s+5]-t[s+3])*(t[s+5]-t[s+3])),E=Math.sqrt((t[s+4]+t[s+2])*(t[s+4]+t[s+2])+(t[s+5]+t[s+3])*(t[s+5]+t[s+3]))/2,A=t[s+7]*Math.log(1+E)/(1+Math.sqrt(x)),t[s+7]=Math.min(1,Math.sqrt(A*(Math.pow(t[s+2],2)+Math.pow(t[s+3],2))/(1+Math.sqrt(x)))),L=t[s+0]+t[s+2]*(A/e.slowDown),t[s+0]=L,k=t[s+1]+t[s+3]*(A/e.slowDown),t[s+1]=k);return{}};var n=r.exports;self.addEventListener("message",(function(i){var r=i.data;e=new Float32Array(r.nodes),r.edges&&(t=new Float32Array(r.edges)),n(r.settings,e,t),self.postMessage({nodes:e.buffer},[e.buffer])}))}},812:(e,t,i)=>{var r=i(928),n=i(186),o=i(739),s=i(847);function a(e,t){if(t=t||{},!n(e))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var i=t.attributes||{},r=t.weighted?i.weight||"weight":null,a=o.assign({},s,t.settings),h=o.validateSettings(a);if(h)throw new Error("graphology-layout-forceatlas2/worker: "+h.message);this.worker=null,this.graph=e,this.settings=a,this.weightAttribute=r,this.matrices=null,this.running=!1,this.killed=!1,this.handleMessage=this.handleMessage.bind(this);var d=void 0,u=this;this.handleGraphUpdate=function(){u.worker&&u.worker.terminate(),d&&clearTimeout(d),d=setTimeout((function(){d=void 0,u.spawnWorker()}),0)},e.on("nodeAdded",this.handleGraphUpdate),e.on("edgeAdded",this.handleGraphUpdate),e.on("nodeDropped",this.handleGraphUpdate),e.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}a.prototype.isRunning=function(){return this.running},a.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=o.createWorker(r),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},a.prototype.handleMessage=function(e){if(this.running){var t=new Float32Array(e.data.nodes);o.assignLayoutChanges(this.graph,t),this.matrices.nodes=t,this.askForIterations()}},a.prototype.askForIterations=function(e){var t=this.matrices,i={settings:this.settings,nodes:t.nodes.buffer},r=[t.nodes.buffer];return e&&(i.edges=t.edges.buffer,r.push(t.edges.buffer)),this.worker.postMessage(i,r),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running||(this.matrices=o.graphToByteArrays(this.graph,this.weightAttribute),this.running=!0,this.askForIterations(!0)),this},a.prototype.stop=function(){return this.running=!1,this},a.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)},e.exports=a},186:e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}}},t={},i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}(812),self.FA2Layout=i},778:()=>{(()=>{var e={187:e=>{"use strict";var t,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,r){function n(i){e.removeListener(t,o),r(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,i,r){var n,o,s,d;if(a(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),s=o[t]),void 0===s)s=o[t]=i,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),(n=h(e))>0&&s.length>n&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,d=u,console&&console.warn&&console.warn(d)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=u.bind(r);return n.listener=i,r.wrapFn=n,n}function l(e,t,i){var r=e._events;if(void 0===r)return[];var n=r[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):f(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function g(e,t,i,r){if("function"==typeof e.on)r.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){r.once&&e.removeEventListener(t,n),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var h=o[e];if(void 0===h)return!1;if("function"==typeof h)r(h,this,t);else{var d=h.length,u=f(h,d);for(i=0;i<d;++i)r(u[i],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,r,n,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){s=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,o=Object.keys(i);for(r=0;r<o.length;++r)"removeListener"!==(n=o[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return l(this,e,!0)},o.prototype.rawListeners=function(e){return l(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},11:(e,t,i)=>{var r=i(993),n=i(346);e.exports=function(){var e=arguments,t=null,i=-1;return new r((function r(){if(null===t){if(++i>=e.length)return{done:!0};t=n(e[i])}var o=t.next();return o.done?(t=null,r()):o}))}},346:(e,t,i)=>{var r=i(993),n=i(844),o=n.ARRAY_BUFFER_SUPPORT,s=n.SYMBOL_SUPPORT;e.exports=function(e){var t=function(e){return"string"==typeof e||Array.isArray(e)||o&&ArrayBuffer.isView(e)?r.fromSequence(e):"object"!=typeof e||null===e?null:s&&"function"==typeof e[Symbol.iterator]?e[Symbol.iterator]():"function"==typeof e.next?e:null}(e);if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t}},993:e=>{function t(e){if("function"!=typeof e)throw new Error("obliterator/iterator: expecting a function!");this.next=e}"undefined"!=typeof Symbol&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,i=e.length,r=0;return new t((function(){return r>=i?{done:!0}:{done:!1,value:e[r++]}}))},t.empty=function(){return new t((function(){return{done:!0}}))},t.fromSequence=function(e){var i=0,r=e.length;return new t((function(){return i>=r?{done:!0}:{done:!1,value:e[i++]}}))},t.is=function(e){return e instanceof t||"object"==typeof e&&null!==e&&"function"==typeof e.next},e.exports=t},844:(e,t)=>{t.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,t.SYMBOL_SUPPORT="undefined"!=typeof Symbol},641:(e,t,i)=>{var r=i(346);e.exports=function(e,t){for(var i,n=arguments.length>1?t:1/0,o=n!==1/0?new Array(n):[],s=0,a=r(e);;){if(s===n)return o;if((i=a.next()).done)return s!==t&&(o.length=s),o;o[s++]=i.value}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";i.r(r),i.d(r,{DirectedGraph:()=>we,Graph:()=>_e,InvalidArgumentsGraphError:()=>y,MultiDirectedGraph:()=>Ae,MultiGraph:()=>Ee,MultiUndirectedGraph:()=>Le,NotFoundGraphError:()=>b,UndirectedGraph:()=>xe,UsageGraphError:()=>v,default:()=>_e});var e=i(187),t=i(993),n=i.n(t),o=i(641),s=i.n(o),a=i(11),h=i.n(a);let d=function(){const e=arguments[0];for(let t=1,i=arguments.length;t<i;t++)if(arguments[t])for(const i in arguments[t])e[i]=arguments[t][i];return e};function u(e,t,i,r){const n=e._nodes.get(t);let o=null;return n?(o="mixed"===r?n.out&&n.out[i]||n.undirected&&n.undirected[i]:"directed"===r?n.out&&n.out[i]:n.undirected&&n.undirected[i],o):o}function c(e){return"object"==typeof e&&null!==e&&e.constructor===Object}function l(e){let t;for(t in e)return!1;return!0}function p(e,t,i){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:i})}function f(e,t,i){const r={enumerable:!0,configurable:!0};"function"==typeof i?r.get=i:(r.value=i,r.writable=!1),Object.defineProperty(e,t,r)}function g(e){return!(!c(e)||e.attributes&&!Array.isArray(e.attributes))}"function"==typeof Object.assign&&(d=Object.assign);class m extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class y extends m{constructor(e){super(e),this.name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,y.prototype.constructor)}}class b extends m{constructor(e){super(e),this.name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.constructor)}}class v extends m{constructor(e){super(e),this.name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.constructor)}}function _(e,t){this.key=e,this.attributes=t,this.clear()}function w(e,t){this.key=e,this.attributes=t,this.clear()}function x(e,t){this.key=e,this.attributes=t,this.clear()}function E(e,t,i,r,n){this.key=t,this.attributes=n,this.undirected=e,this.source=i,this.target=r}function A(e,t,i,r,n,o,s){let a,h,d="out",u="in";if(t&&(d=u="undirected"),e.multi){if(a=o[d],h=a[n],void 0===h&&(h=new Set,a[n]=h),h.add(i),r===n&&t)return;a=s[u],void 0===a[r]&&(a[r]=h)}else{if(o[d][n]=i,r===n&&t)return;s[u][r]=i}}function L(e,t,i,r,n,o,s){let a,h,d,u;if(r=""+r,0===i){if(a=e._nodes.get(r),!a)throw new b(`Graph.${t}: could not find the "${r}" node in the graph.`);d=n,u=o}else if(3===i){if(n=""+n,h=e._edges.get(n),!h)throw new b(`Graph.${t}: could not find the "${n}" edge in the graph.`);const i=h.source.key,c=h.target.key;if(r===i)a=h.target;else{if(r!==c)throw new b(`Graph.${t}: the "${r}" node is not attached to the "${n}" edge (${i}, ${c}).`);a=h.source}d=o,u=s}else{if(h=e._edges.get(r),!h)throw new b(`Graph.${t}: could not find the "${r}" edge in the graph.`);a=1===i?h.source:h.target,d=n,u=o}return[a,d,u]}_.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}},w.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}},w.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},x.prototype.clear=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},x.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};const k=[{name:e=>`get${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){const[o,s]=L(this,t,i,e,r,n);return o.attributes[s]}}},{name:e=>`get${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r){const[n]=L(this,t,i,e,r);return n.attributes}}},{name:e=>`has${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){const[o,s]=L(this,t,i,e,r,n);return o.attributes.hasOwnProperty(s)}}},{name:e=>`set${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n,o){const[s,a,h]=L(this,t,i,e,r,n,o);return s.attributes[a]=h,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:a}),this}}},{name:e=>`update${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n,o){const[s,a,h]=L(this,t,i,e,r,n,o);if("function"!=typeof h)throw new y(`Graph.${t}: updater should be a function.`);const d=s.attributes,u=h(d[a]);return d[a]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:a}),this}}},{name:e=>`remove${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){const[o,s]=L(this,t,i,e,r,n);return delete o.attributes[s],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:s}),this}}},{name:e=>`replace${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){const[o,s]=L(this,t,i,e,r,n);if(!c(s))throw new y(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=s,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){const[o,s]=L(this,t,i,e,r,n);if(!c(s))throw new y(`Graph.${t}: provided attributes are not a plain object.`);return d(o.attributes,s),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:s}),this}}},{name:e=>`update${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){const[o,s]=L(this,t,i,e,r,n);if("function"!=typeof s)throw new y(`Graph.${t}: provided updater is not a function.`);return o.attributes=s(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}}],S=[{name:e=>`get${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r){let n;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,s=""+r;if(r=arguments[2],n=u(this,o,s,i),!n)throw new b(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else if(e=""+e,n=this._edges.get(e),!n)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("mixed"!==i&&n.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return n.attributes[r]}}},{name:e=>`get${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e){let r;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const n=""+e,o=""+arguments[1];if(r=u(this,n,o,i),!r)throw new b(`Graph.${t}: could not find an edge for the given path ("${n}" - "${o}").`)}else if(e=""+e,r=this._edges.get(e),!r)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("mixed"!==i&&r.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return r.attributes}}},{name:e=>`has${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r){let n;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,s=""+r;if(r=arguments[2],n=u(this,o,s,i),!n)throw new b(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else if(e=""+e,n=this._edges.get(e),!n)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("mixed"!==i&&n.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return n.attributes.hasOwnProperty(r)}}},{name:e=>`set${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){let o;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,a=""+r;if(r=arguments[2],n=arguments[3],o=u(this,s,a,i),!o)throw new b(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else if(e=""+e,o=this._edges.get(e),!o)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("mixed"!==i&&o.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return o.attributes[r]=n,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:e=>`update${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r,n){let o;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,a=""+r;if(r=arguments[2],n=arguments[3],o=u(this,s,a,i),!o)throw new b(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else if(e=""+e,o=this._edges.get(e),!o)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("function"!=typeof n)throw new y(`Graph.${t}: updater should be a function.`);if("mixed"!==i&&o.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return o.attributes[r]=n(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:e=>`remove${e}Attribute`,attacher:function(e,t,i){e.prototype[t]=function(e,r){let n;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,s=""+r;if(r=arguments[2],n=u(this,o,s,i),!n)throw new b(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else if(e=""+e,n=this._edges.get(e),!n)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("mixed"!==i&&n.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return delete n.attributes[r],this.emit("edgeAttributesUpdated",{key:n.key,type:"remove",attributes:n.attributes,name:r}),this}}},{name:e=>`replace${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r){let n;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,s=""+r;if(r=arguments[2],n=u(this,o,s,i),!n)throw new b(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else if(e=""+e,n=this._edges.get(e),!n)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if(!c(r))throw new y(`Graph.${t}: provided attributes are not a plain object.`);if("mixed"!==i&&n.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return n.attributes=r,this.emit("edgeAttributesUpdated",{key:n.key,type:"replace",attributes:n.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r){let n;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,s=""+r;if(r=arguments[2],n=u(this,o,s,i),!n)throw new b(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else if(e=""+e,n=this._edges.get(e),!n)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if(!c(r))throw new y(`Graph.${t}: provided attributes are not a plain object.`);if("mixed"!==i&&n.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return d(n.attributes,r),this.emit("edgeAttributesUpdated",{key:n.key,type:"merge",attributes:n.attributes,data:r}),this}}},{name:e=>`update${e}Attributes`,attacher:function(e,t,i){e.prototype[t]=function(e,r){let n;if("mixed"!==this.type&&"mixed"!==i&&i!==this.type)throw new v(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new v(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,s=""+r;if(r=arguments[2],n=u(this,o,s,i),!n)throw new b(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else if(e=""+e,n=this._edges.get(e),!n)throw new b(`Graph.${t}: could not find the "${e}" edge in the graph.`);if("function"!=typeof r)throw new y(`Graph.${t}: provided updater is not a function.`);if("mixed"!==i&&n.undirected!==("undirected"===i))throw new b(`Graph.${t}: could not find the "${e}" ${i} edge in the graph.`);return n.attributes=r(n.attributes),this.emit("edgeAttributesUpdated",{key:n.key,type:"update",attributes:n.attributes}),this}}}],M=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function C(e,t){for(const i in t)e.push(t[i].key)}function $(e,t){for(const i in t)t[i].forEach((t=>e.push(t.key)))}function N(e,t,i){for(const r in e){if(r===i)continue;const n=e[r];t(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected)}}function T(e,t,i){for(const r in e)r!==i&&e[r].forEach((e=>t(e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes,e.undirected)))}function G(e,t,i){let r=!1;for(const n in e){if(n===i)continue;const o=e[n];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),r)return o.key}}function O(e,t,i){let r,n,o,s,a,h=!1;for(const d in e)if(d!==i)for(r=e[d].values();n=r.next(),!0!==n.done;)if(o=n.value,s=o.source,a=o.target,h=t(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected),h)return o.key}function D(e,t){const i=Object.keys(e),r=i.length;let o=null,s=0;return new(n())((function n(){let a;if(o){const e=o.next();if(e.done)return o=null,s++,n();a=e.value}else{if(s>=r)return{done:!0};const h=i[s];if(h===t)return s++,n();if(a=e[h],a instanceof Set)return o=a.values(),n();s++}return{done:!1,value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected}}}))}function P(e,t,i){const r=t[i];r&&e.push(r.key)}function R(e,t,i){const r=t[i];r&&r.forEach((t=>e.push(t.key)))}function z(e,t,i){const r=e[t];if(!r)return;const n=r.source,o=r.target;i(r.key,r.attributes,n.key,o.key,n.attributes,o.attributes,r.undirected)}function F(e,t,i){const r=e[t];r&&r.forEach((e=>i(e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes,e.undirected)))}function j(e,t,i){const r=e[t];if(!r)return;const n=r.source,o=r.target;return i(r.key,r.attributes,n.key,o.key,n.attributes,o.attributes,r.undirected)?r.key:void 0}function U(e,t,i){const r=e[t];if(!r)return;let n=!1;const o=r.values();let s,a;for(;s=o.next(),!0!==s.done;)if(a=s.value,n=i(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),n)return a.key}function I(e,t){const i=e[t];if(i instanceof Set){const e=i.values();return new(n())((function(){const t=e.next();if(t.done)return t;const i=t.value;return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}))}return n().of([i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes])}function q(e,t){if(0===e.size)return[];if("mixed"===t||t===e.type)return"function"==typeof Array.from?Array.from(e._edges.keys()):s()(e._edges.keys(),e._edges.size);const i="undirected"===t?e.undirectedSize:e.directedSize,r=new Array(i),n="undirected"===t,o=e._edges.values();let a,h,d=0;for(;a=o.next(),!0!==a.done;)h=a.value,h.undirected===n&&(r[d++]=h.key);return r}function W(e,t,i){if(0===e.size)return;const r="mixed"!==t&&t!==e.type,n="undirected"===t;let o,s;const a=e._edges.values();for(;o=a.next(),!0!==o.done;){if(s=o.value,r&&s.undirected!==n)continue;const{key:e,attributes:t,source:a,target:h}=s;i(e,t,a.key,h.key,a.attributes,h.attributes,s.undirected)}}function B(e,t,i){if(0===e.size)return;const r="mixed"!==t&&t!==e.type,n="undirected"===t;let o,s,a=!1;const h=e._edges.values();for(;o=h.next(),!0!==o.done;){if(s=o.value,r&&s.undirected!==n)continue;const{key:e,attributes:t,source:h,target:d}=s;if(a=i(e,t,h.key,d.key,h.attributes,d.attributes,s.undirected),a)return e}}function H(e,t){if(0===e.size)return n().empty();const i="mixed"!==t&&t!==e.type,r="undirected"===t,o=e._edges.values();return new(n())((function(){let e,t;for(;;){if(e=o.next(),e.done)return e;if(t=e.value,!i||t.undirected===r)break}return{value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected},done:!1}}))}function Y(e,t,i,r){const n=[],o=e?$:C;return"undirected"!==t&&("out"!==i&&o(n,r.in),"in"!==i&&o(n,r.out),!i&&r.directedSelfLoops>0&&n.splice(n.lastIndexOf(r.key),1)),"directed"!==t&&o(n,r.undirected),n}function K(e,t,i,r,n){const o=e?T:N;"undirected"!==t&&("out"!==i&&o(r.in,n),"in"!==i&&o(r.out,n,i?null:r.key)),"directed"!==t&&o(r.undirected,n)}function V(e,t,i,r,n){const o=e?O:G;let s;if("undirected"!==t){if("out"!==i&&(s=o(r.in,n),s))return s;if("in"!==i&&(s=o(r.out,n,i?null:r.key),s))return s}if("directed"!==t&&(s=o(r.undirected,n),s))return s}function Z(e,t,i){let r=n().empty();return"undirected"!==e&&("out"!==t&&void 0!==i.in&&(r=h()(r,D(i.in))),"in"!==t&&void 0!==i.out&&(r=h()(r,D(i.out,t?null:i.key)))),"directed"!==e&&void 0!==i.undirected&&(r=h()(r,D(i.undirected))),r}function X(e,t,i,r,n){const o=t?R:P,s=[];return"undirected"!==e&&(void 0!==r.in&&"out"!==i&&o(s,r.in,n),void 0!==r.out&&"in"!==i&&o(s,r.out,n),!i&&r.directedSelfLoops>0&&s.splice(s.lastIndexOf(r.key),1)),"directed"!==e&&void 0!==r.undirected&&o(s,r.undirected,n),s}function Q(e,t,i,r,n,o){const s=t?F:z;"undirected"!==e&&(void 0!==r.in&&"out"!==i&&s(r.in,n,o),r.key!==n&&void 0!==r.out&&"in"!==i&&s(r.out,n,o)),"directed"!==e&&void 0!==r.undirected&&s(r.undirected,n,o)}function J(e,t,i,r,n,o){const s=t?U:j;let a;if("undirected"!==e){if(void 0!==r.in&&"out"!==i&&(a=s(r.in,n,o),a))return a;if(r.key!==n&&void 0!==r.out&&"in"!==i&&(a=s(r.out,n,o,i?null:r.key),a))return a}if("directed"!==e&&void 0!==r.undirected&&(a=s(r.undirected,n,o),a))return a}function ee(e,t,i,r){let o=n().empty();return"undirected"!==e&&(void 0!==i.in&&"out"!==t&&r in i.in&&(o=h()(o,I(i.in,r))),void 0!==i.out&&"in"!==t&&r in i.out&&(o=h()(o,I(i.out,r)))),"directed"!==e&&void 0!==i.undirected&&r in i.undirected&&(o=h()(o,I(i.undirected,r))),o}const te=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ie(e,t){if(void 0!==t)for(const i in t)e.add(i)}function re(e,t,i){for(const r in t){let n=t[r];n instanceof Set&&(n=n.values().next().value);const o=n.source,s=n.target,a=o===e?s:o;i(a.key,a.attributes)}}function ne(e,t,i,r){for(const n in i){let o=i[n];o instanceof Set&&(o=o.values().next().value);const s=o.source,a=o.target,h=s===t?a:s;e.has(h.key)||(e.add(h.key),r(h.key,h.attributes))}}function oe(e,t,i){for(const r in t){let n=t[r];n instanceof Set&&(n=n.values().next().value);const o=n.source,s=n.target,a=o===e?s:o;if(i(a.key,a.attributes))return a.key}}function se(e,t,i,r){for(const n in i){let o=i[n];o instanceof Set&&(o=o.values().next().value);const s=o.source,a=o.target,h=s===t?a:s;if(!e.has(h.key)&&(e.add(h.key),r(h.key,h.attributes)))return h.key}}function ae(e,t){const i=Object.keys(t),r=i.length;let o=0;return new(n())((function(){if(o>=r)return{done:!0};let n=t[i[o++]];n instanceof Set&&(n=n.values().next().value);const s=n.source,a=n.target,h=s===e?a:s;return{done:!1,value:{neighbor:h.key,attributes:h.attributes}}}))}function he(e,t,i){const r=Object.keys(i),o=r.length;let s=0;return new(n())((function n(){if(s>=o)return{done:!0};let a=i[r[s++]];a instanceof Set&&(a=a.values().next().value);const h=a.source,d=a.target,u=h===t?d:h;return e.has(u.key)?n():(e.add(u.key),{done:!1,value:{neighbor:u.key,attributes:u.attributes}})}))}function de(e,t,i,r,n){const o=r._nodes.values(),s=r.type;let a,h,d,u,c,l,p;for(;a=o.next(),!0!==a.done;){let r=!1;if(h=a.value,"undirected"!==s)for(d in u=h.out,u)if(c=u[d],l=c.target,r=!0,p=n(h.key,l.key,h.attributes,l.attributes,c.key,c.attributes,c.undirected),e&&p)return c;if("directed"!==s)for(d in u=h.undirected,u)if(!(t&&h.key>d)&&(c=u[d],l=c.target,l.key!==d&&(l=c.source),r=!0,p=n(h.key,l.key,h.attributes,l.attributes,c.key,c.attributes,c.undirected),e&&p))return c;if(i&&!r&&(p=n(h.key,null,h.attributes,null,null,null,null),e&&p))return null}}function ue(e,t,i,r,n){const o=r._nodes.values(),s=r.type;let a,h,d,u,c,l,p,f,g;for(;a=o.next(),!0!==a.done;){let r=!1;if(h=a.value,"undirected"!==s)for(d in l=h.out,l)for(u=l[d].values();c=u.next(),!0!==c.done;)if(p=c.value,f=p.target,r=!0,g=n(h.key,f.key,h.attributes,f.attributes,p.key,p.attributes,p.undirected),e&&g)return p;if("directed"!==s)for(d in l=h.undirected,l)if(!(t&&h.key>d))for(u=l[d].values();c=u.next(),!0!==c.done;)if(p=c.value,f=p.target,f.key!==d&&(f=p.source),r=!0,g=n(h.key,f.key,h.attributes,f.attributes,p.key,p.attributes,p.undirected),e&&g)return p;if(i&&!r&&(g=n(h.key,null,h.attributes,null,null,null,null),e&&g))return null}}function ce(e,t){const i={key:e};return l(t.attributes)||(i.attributes=d({},t.attributes)),i}function le(e,t){const i={key:e,source:t.source.key,target:t.target.key};return l(t.attributes)||(i.attributes=d({},t.attributes)),t.undirected&&(i.undirected=!0),i}const pe=function(){let e=255&Math.floor(256*Math.random());return()=>e++}(),fe=new Set(["directed","undirected","mixed"]),ge=new Set(["domain","_events","_eventsCount","_maxListeners"]),me={allowSelfLoops:!0,multi:!1,type:"mixed"};function ye(e,t,i){const r=new e.NodeDataClass(t,i);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:i}),r}function be(e,t,i,r,n,o,s,a){if(!r&&"undirected"===e.type)throw new v(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&"directed"===e.type)throw new v(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!c(a))throw new y(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!e.allowSelfLoops&&o===s)throw new v(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const h=e._nodes.get(o),d=e._nodes.get(s);if(!h)throw new b(`Graph.${t}: source node "${o}" not found.`);if(!d)throw new b(`Graph.${t}: target node "${s}" not found.`);const u={key:null,undirected:r,source:o,target:s,attributes:a};if(i)n=e._edgeKeyGenerator();else if(n=""+n,e._edges.has(n))throw new v(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!e.multi&&(r?void 0!==h.undirected[s]:void 0!==h.out[s]))throw new v(`Graph.${t}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const l=new E(r,n,h,d,a);return e._edges.set(n,l),o===s?r?(h.undirectedSelfLoops++,e._undirectedSelfLoopCount++):(h.directedSelfLoops++,e._directedSelfLoopCount++):r?(h.undirectedDegree++,d.undirectedDegree++):(h.outDegree++,d.inDegree++),A(e,r,l,o,s,h,d),r?e._undirectedSize++:e._directedSize++,u.key=n,e.emit("edgeAdded",u),n}function ve(e,t,i,r,n,o,s,a,h){if(!r&&"undirected"===e.type)throw new v(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&"directed"===e.type)throw new v(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a)if(h){if("function"!=typeof a)throw new y(`Graph.${t}: invalid updater function. Expecting a function but got "${a}"`)}else if(!c(a))throw new y(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);let u;if(o=""+o,s=""+s,h&&(u=a,a=void 0),!e.allowSelfLoops&&o===s)throw new v(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let l,p,f=e._nodes.get(o),g=e._nodes.get(s);if(!i&&(l=e._edges.get(n),l)){if(!(l.source.key===o&&l.target.key===s||r&&l.source.key===s&&l.target.key===o))throw new v(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${o}" source & "${s}" target vs. ("${l.source.key}", "${l.target.key}").`);p=l}if(p||e.multi||!f||(p=r?f.undirected[s]:f.out[s]),p){const t=[p.key,!1,!1,!1];if(h?!u:!a)return t;if(h){const t=p.attributes;p.attributes=u(t),e.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else d(p.attributes,a),e.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return t}a=a||{},h&&u&&(a=u(a));const m={key:null,undirected:r,source:o,target:s,attributes:a};if(i)n=e._edgeKeyGenerator();else if(n=""+n,e._edges.has(n))throw new v(`Graph.${t}: the "${n}" edge already exists in the graph.`);let b=!1,_=!1;return f||(f=ye(e,o,{}),b=!0,o===s&&(g=f,_=!0)),g||(g=ye(e,s,{}),_=!0),l=new E(r,n,f,g,a),e._edges.set(n,l),o===s?r?(f.undirectedSelfLoops++,e._undirectedSelfLoopCount++):(f.directedSelfLoops++,e._directedSelfLoopCount++):r?(f.undirectedDegree++,g.undirectedDegree++):(f.outDegree++,g.inDegree++),A(e,r,l,o,s,f,g),r?e._undirectedSize++:e._directedSize++,m.key=n,e.emit("edgeAdded",m),[n,!0,b,_]}class _e extends e.EventEmitter{constructor(e){if(super(),"boolean"!=typeof(e=d({},me,e)).multi)throw new y(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!fe.has(e.type))throw new y(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if("boolean"!=typeof e.allowSelfLoops)throw new y(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);p(this,"NodeDataClass","mixed"===e.type?_:"directed"===e.type?w:x);const t=pe();let i=0;p(this,"_attributes",{}),p(this,"_nodes",new Map),p(this,"_edges",new Map),p(this,"_directedSize",0),p(this,"_undirectedSize",0),p(this,"_directedSelfLoopCount",0),p(this,"_undirectedSelfLoopCount",0),p(this,"_edgeKeyGenerator",(()=>{let e;do{e="geid_"+t+"_"+i++}while(this._edges.has(e));return e})),p(this,"_options",e),ge.forEach((e=>p(this,e,this[e]))),f(this,"order",(()=>this._nodes.size)),f(this,"size",(()=>this._edges.size)),f(this,"directedSize",(()=>this._directedSize)),f(this,"undirectedSize",(()=>this._undirectedSize)),f(this,"selfLoopCount",(()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount)),f(this,"directedSelfLoopCount",(()=>this._directedSelfLoopCount)),f(this,"undirectedSelfLoopCount",(()=>this._undirectedSelfLoopCount)),f(this,"multi",this._options.multi),f(this,"type",this._options.type),f(this,"allowSelfLoops",this._options.allowSelfLoops),f(this,"implementation",(()=>"graphology"))}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if("undirected"===this.type)return!1;if(1===arguments.length){const t=""+e,i=this._edges.get(t);return!!i&&!i.undirected}if(2===arguments.length){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)return!1;const r=i.out[t];return!(!r||this.multi&&!r.size)}throw new y(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if("directed"===this.type)return!1;if(1===arguments.length){const t=""+e,i=this._edges.get(t);return!!i&&i.undirected}if(2===arguments.length){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)return!1;const r=i.undirected[t];return!(!r||this.multi&&!r.size)}throw new y(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(1===arguments.length){const t=""+e;return this._edges.has(t)}if(2===arguments.length){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)return!1;let r=void 0!==i.out&&i.out[t];return r||(r=void 0!==i.undirected&&i.undirected[t]),!(!r||this.multi&&!r.size)}throw new y(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if("undirected"===this.type)return;if(e=""+e,t=""+t,this.multi)throw new v("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new b(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||void 0;return r?r.key:void 0}undirectedEdge(e,t){if("directed"===this.type)return;if(e=""+e,t=""+t,this.multi)throw new v("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new b(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const r=i.undirected&&i.undirected[t]||void 0;return r?r.key:void 0}edge(e,t){if(this.multi)throw new v("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.edge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(r)return r.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&(t in i.in||t in i.out)}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return"directed"!==this.type&&t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&(t in i.in||t in i.out)||"directed"!==this.type&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in i.in||"directed"!==this.type&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in i.out||"directed"!==this.type&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.inDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree+t.directedSelfLoops}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.outDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.outDegree+t.directedSelfLoops}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.directedDegree: could not find the "${e}" node in the graph.`);if("undirected"===this.type)return 0;const i=t.directedSelfLoops;return t.inDegree+i+(t.outDegree+i)}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);if("directed"===this.type)return 0;const i=t.undirectedSelfLoops;return t.undirectedDegree+2*i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return"directed"!==this.type&&(i+=t.undirectedDegree+2*t.undirectedSelfLoops),"undirected"!==this.type&&(i+=t.inDegree+t.outDegree+2*t.directedSelfLoops),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.outDegree}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree+t.outDegree}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"directed"===this.type?0:t.undirectedDegree}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0;return"directed"!==this.type&&(i+=t.undirectedDegree),"undirected"!==this.type&&(i+=t.inDegree+t.outDegree),i}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new b(`Graph.opposite: could not find the "${t}" edge in the graph.`);const r=i.source.key,n=i.target.key;if(e===r)return n;if(e===n)return r;throw new b(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${r}, ${n}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new b(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){const i=function(e,t,i){if(i&&!c(i))throw new y(`Graph.addNode: invalid attributes. Expecting an object but got "${i}"`);if(t=""+t,i=i||{},e._nodes.has(t))throw new v(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new e.NodeDataClass(t,i);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:i}),r}(this,e,t);return i.key}mergeNode(e,t){if(t&&!c(t))throw new y(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(d(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&"function"!=typeof t)throw new y(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const r=i.attributes;i.attributes=t(r),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=t?t({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.dropNode: could not find the "${e}" node in the graph.`);this.forEachEdge(e,(e=>{this.dropEdge(e)})),this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const e=""+arguments[0],i=""+arguments[1];if(t=u(this,e,i,this.type),!t)throw new b(`Graph.dropEdge: could not find the "${e}" -> "${i}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new b(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);this._edges.delete(t.key);const{source:i,target:r,attributes:n}=t,o=t.undirected;return i===r?o?(i.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(i.directedSelfLoops--,this._directedSelfLoopCount--):o?(i.undirectedDegree--,r.undirectedDegree--):(i.outDegree--,r.inDegree--),function(e,t,i){const r=e.multi,{source:n,target:o}=i,s=n.key,a=o.key,h=n[t?"undirected":"out"],d=t?"undirected":"in";if(a in h)if(r){const e=h[a];1===e.size?(delete h[a],delete o[d][s]):e.delete(i)}else delete h[a];r||delete o[d][s]}(this,o,t),o?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:e,attributes:n,source:i.key,target:r.key,undirected:o}),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){!function(e){const t=e._nodes.values();let i;for(;i=t.next(),!0!==i.done;)i.value.clear()}(this),this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if("function"!=typeof t)throw new y("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!c(e))throw new y("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!c(e))throw new y("Graph.mergeAttributes: provided attributes are not a plain object.");return d(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if("function"!=typeof e)throw new y("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if("function"!=typeof e)throw new y("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!g(t))throw new y("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,n;for(;r=i.next(),!0!==r.done;)n=r.value,n.attributes=e(n.key,n.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if("function"!=typeof e)throw new y("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!g(t))throw new y("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,n,o,s;for(;r=i.next(),!0!==r.done;)n=r.value,o=n.source,s=n.target,n.attributes=e(n.key,n.attributes,o.key,s.key,o.attributes,s.attributes,n.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if("function"!=typeof e)throw new y("Graph.forEachAdjacencyEntry: expecting a callback.");this.multi?ue(!1,!1,!1,this,e):de(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if("function"!=typeof e)throw new y("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");this.multi?ue(!1,!1,!0,this,e):de(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if("function"!=typeof e)throw new y("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");this.multi?ue(!1,!0,!1,this,e):de(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if("function"!=typeof e)throw new y("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");this.multi?ue(!1,!0,!0,this,e):de(!1,!0,!0,this,e)}nodes(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):s()(this._nodes.keys(),this._nodes.size)}forEachNode(e){if("function"!=typeof e)throw new y("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),!0!==i.done;)r=i.value,e(r.key,r.attributes)}findNode(e){if("function"!=typeof e)throw new y("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),!0!==i.done;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if("function"!=typeof e)throw new y("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,r;const n=new Array(this.order);let o=0;for(;i=t.next(),!0!==i.done;)r=i.value,n[o++]=e(r.key,r.attributes);return n}someNode(e){if("function"!=typeof e)throw new y("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),!0!==i.done;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if("function"!=typeof e)throw new y("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),!0!==i.done;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if("function"!=typeof e)throw new y("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,r;const n=[];for(;i=t.next(),!0!==i.done;)r=i.value,e(r.key,r.attributes)&&n.push(r.key);return n}reduceNodes(e,t){if("function"!=typeof e)throw new y("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new y("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const r=this._nodes.values();let n,o;for(;n=r.next(),!0!==n.done;)o=n.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new(n())((()=>{const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}}))}exportNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.exportNode: could not find the "${e}" node in the graph.`);return ce(e,t)}exportEdge(e){e=""+e;const t=this._edges.get(e);if(!t)throw new b(`Graph.exportEdge: could not find the "${e}" edge in the graph.`);return le(e,t)}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach(((i,r)=>{e[t++]=ce(r,i)}));const i=new Array(this._edges.size);return t=0,this._edges.forEach(((e,r)=>{i[t++]=le(r,e)})),{attributes:this.getAttributes(),nodes:e,edges:i,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}}importNode(e,t=!1){const i=c(r=e)?"key"in r?!("attributes"in r)||c(r.attributes)&&null!==r.attributes?null:"invalid-attributes":"no-key":"not-object";var r;if(i){if("not-object"===i)throw new y('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===i)throw new y("Graph.importNode: no key provided.");if("invalid-attributes"===i)throw new y("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}const{key:n,attributes:o={}}=e;return t?this.mergeNode(n,o):this.addNode(n,o),this}importEdge(e,t=!1){const i=c(r=e)?"source"in r?"target"in r?!("attributes"in r)||c(r.attributes)&&null!==r.attributes?"undirected"in r&&"boolean"!=typeof r.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object";var r;if(i){if("not-object"===i)throw new y('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===i)throw new y("Graph.importEdge: missing souce.");if("no-target"===i)throw new y("Graph.importEdge: missing target.");if("invalid-attributes"===i)throw new y("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===i)throw new y("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}const{source:n,target:o,attributes:s={},undirected:a=!1}=e;let h;return"key"in e?(h=t?a?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:a?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,e.key,n,o,s)):(h=t?a?this.mergeUndirectedEdge:this.mergeDirectedEdge:a?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,n,o,s)),this}import(e,t=!1){if(null!==(i=e)&&"object"==typeof i&&"function"==typeof i.addUndirectedEdgeWithKey&&"function"==typeof i.dropNode)return this.import(e.export(),t),this;var i;if(!c(e))throw new y("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!c(e.attributes))throw new y("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,n,o;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new y("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=o.length;r<n;r++)this.importNode(o[r],t)}if(e.edges){if(o=e.edges,!Array.isArray(o))throw new y("Graph.import: invalid edges. Expecting an array.");for(r=0,n=o.length;r<n;r++)this.importEdge(o[r],t)}return this}nullCopy(e){const t=new _e(d({},this._options,e));return t.replaceAttributes(d({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach(((e,i)=>{const r=d({},e.attributes);e=new t.NodeDataClass(i,r),t._nodes.set(i,e)})),t}copy(){const e=this.emptyCopy(),t=this._edges.values();let i,r;for(;i=t.next(),!0!==i.done;)r=i.value,be(e,"copy",!1,r.undirected,r.key,r.source.key,r.target.key,d({},r.attributes));return e}upgradeToMixed(){return"mixed"===this.type||(this._nodes.forEach((e=>e.upgradeToMixed())),this._options.type="mixed",f(this,"type",this._options.type),p(this,"NodeDataClass",_)),this}upgradeToMulti(){return this.multi||(this._options.multi=!0,f(this,"multi",!0),(e=this)._nodes.forEach(((t,i)=>{if(t.out)for(const r in t.out){const n=new Set;n.add(t.out[r]),t.out[r]=n,e._nodes.get(r).in[i]=n}if(t.undirected)for(const r in t.undirected){if(r>i)continue;const n=new Set;n.add(t.undirected[r]),t.undirected[r]=n,e._nodes.get(r).undirected[i]=n}}))),this;var e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach(((t,i)=>{e[i]=t.attributes}));const t={},i={};this._edges.forEach(((e,r)=>{const n=e.undirected?"--":"->";let o,s="",a=e.source.key,h=e.target.key;e.undirected&&a>h&&(o=a,a=h,h=o);const d=`(${a})${n}(${h})`;r.startsWith("geid_")?this.multi&&(void 0===i[d]?i[d]=0:i[d]++,s+=`${i[d]}. `):s+=`[${r}]: `,s+=d,t[s]=e.attributes}));const r={};for(const e in this)this.hasOwnProperty(e)&&!ge.has(e)&&"function"!=typeof this[e]&&"symbol"!=typeof e&&(r[e]=this[e]);return r.attributes=this._attributes,r.nodes=e,r.edges=t,p(r,"constructor",this.constructor),r}}"undefined"!=typeof Symbol&&(_e.prototype[Symbol.for("nodejs.util.inspect.custom")]=_e.prototype.inspect),[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}].forEach((e=>{["add","merge","update"].forEach((t=>{const i=e.name(t),r="add"===t?be:ve;e.generateKey?_e.prototype[i]=function(n,o,s){return r(this,i,!0,"undirected"===(e.type||this.type),null,n,o,s,"update"===t)}:_e.prototype[i]=function(n,o,s,a){return r(this,i,!1,"undirected"===(e.type||this.type),n,o,s,a,"update"===t)}}))})),function(e){k.forEach((function({name:t,attacher:i}){i(e,t("Node"),0),i(e,t("Source"),1),i(e,t("Target"),2),i(e,t("Opposite"),3)}))}(_e),function(e){S.forEach((function({name:t,attacher:i}){i(e,t("Edge"),"mixed"),i(e,t("DirectedEdge"),"directed"),i(e,t("UndirectedEdge"),"undirected")}))}(_e),function(e){M.forEach((t=>{!function(e,t){const{name:i,type:r,direction:n}=t;e.prototype[i]=function(e,t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];if(!arguments.length)return q(this,r);if(1===arguments.length){e=""+e;const t=this._nodes.get(e);if(void 0===t)throw new b(`Graph.${i}: could not find the "${e}" node in the graph.`);return Y(this.multi,"mixed"===r?this.type:r,n,t)}if(2===arguments.length){e=""+e,t=""+t;const o=this._nodes.get(e);if(!o)throw new b(`Graph.${i}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.${i}:  could not find the "${t}" target node in the graph.`);return X(r,this.multi,n,o,t)}throw new y(`Graph.${i}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}(e,t),function(e,t){const{name:i,type:r,direction:n}=t,o="forEach"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[o]=function(e,t,i){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return W(this,r,i=e);if(2===arguments.length){e=""+e,i=t;const s=this._nodes.get(e);if(void 0===s)throw new b(`Graph.${o}: could not find the "${e}" node in the graph.`);return K(this.multi,"mixed"===r?this.type:r,n,s,i)}if(3===arguments.length){e=""+e,t=""+t;const s=this._nodes.get(e);if(!s)throw new b(`Graph.${o}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.${o}:  could not find the "${t}" target node in the graph.`);return Q(r,this.multi,n,s,t,i)}throw new y(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+i[0].toUpperCase()+i.slice(1);e.prototype[s]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop();let i;if(0===e.length){let n=0;"directed"!==r&&(n+=this.undirectedSize),"undirected"!==r&&(n+=this.directedSize),i=new Array(n);let o=0;e.push(((e,r,n,s,a,h,d)=>{i[o++]=t(e,r,n,s,a,h,d)}))}else i=[],e.push(((e,r,n,o,s,a,h)=>{i.push(t(e,r,n,o,s,a,h))}));return this[o].apply(this,e),i};const a="filter"+i[0].toUpperCase()+i.slice(1);e.prototype[a]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop(),i=[];return e.push(((e,r,n,o,s,a,h)=>{t(e,r,n,o,s,a,h)&&i.push(e)})),this[o].apply(this,e),i};const h="reduce"+i[0].toUpperCase()+i.slice(1);e.prototype[h]=function(){let e,t,i=Array.prototype.slice.call(arguments);if(i.length<2||i.length>4)throw new y(`Graph.${h}: invalid number of arguments (expecting 2, 3 or 4 and got ${i.length}).`);if("function"==typeof i[i.length-1]&&"function"!=typeof i[i.length-2])throw new y(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);2===i.length?(e=i[0],t=i[1],i=[]):3===i.length?(e=i[1],t=i[2],i=[i[0]]):4===i.length&&(e=i[2],t=i[3],i=[i[0],i[1]]);let r=t;return i.push(((t,i,n,o,s,a,h)=>{r=e(r,t,i,n,o,s,a,h)})),this[o].apply(this,i),r}}(e,t),function(e,t){const{name:i,type:r,direction:n}=t,o="find"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[o]=function(e,t,i){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return!1;if(1===arguments.length)return B(this,r,i=e);if(2===arguments.length){e=""+e,i=t;const s=this._nodes.get(e);if(void 0===s)throw new b(`Graph.${o}: could not find the "${e}" node in the graph.`);return V(this.multi,"mixed"===r?this.type:r,n,s,i)}if(3===arguments.length){e=""+e,t=""+t;const s=this._nodes.get(e);if(!s)throw new b(`Graph.${o}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.${o}:  could not find the "${t}" target node in the graph.`);return J(r,this.multi,n,s,t,i)}throw new y(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[s]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop();return e.push(((e,i,r,n,o,s,a)=>t(e,i,r,n,o,s,a))),!!this[o].apply(this,e)};const a="every"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[a]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop();return e.push(((e,i,r,n,o,s,a)=>!t(e,i,r,n,o,s,a))),!this[o].apply(this,e)}}(e,t),function(e,t){const{name:i,type:r,direction:o}=t,s=i.slice(0,-1)+"Entries";e.prototype[s]=function(e,t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return n().empty();if(!arguments.length)return H(this,r);if(1===arguments.length){e=""+e;const t=this._nodes.get(e);if(!t)throw new b(`Graph.${s}: could not find the "${e}" node in the graph.`);return Z(r,o,t)}if(2===arguments.length){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new b(`Graph.${s}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new b(`Graph.${s}:  could not find the "${t}" target node in the graph.`);return ee(r,o,i,t)}throw new y(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}(e,t)}))}(_e),function(e){te.forEach((t=>{(function(e,t){const{name:i,type:r,direction:n}=t;e.prototype[i]=function(e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];e=""+e;const t=this._nodes.get(e);if(void 0===t)throw new b(`Graph.${i}: could not find the "${e}" node in the graph.`);return function(e,t,i){if("mixed"!==e){if("undirected"===e)return Object.keys(i.undirected);if("string"==typeof t)return Object.keys(i[t])}const r=new Set;return"undirected"!==e&&("out"!==t&&ie(r,i.in),"in"!==t&&ie(r,i.out)),"directed"!==e&&ie(r,i.undirected),s()(r.values(),r.size)}("mixed"===r?this.type:r,n,t)}})(e,t),function(e,t){const{name:i,type:r,direction:n}=t,o="forEach"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[o]=function(e,t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return;e=""+e;const i=this._nodes.get(e);if(void 0===i)throw new b(`Graph.${o}: could not find the "${e}" node in the graph.`);!function(e,t,i,r){if("mixed"!==e){if("undirected"===e)return re(i,i.undirected,r);if("string"==typeof t)return re(i,i[t],r)}const n=new Set;"undirected"!==e&&("out"!==t&&ne(n,i,i.in,r),"in"!==t&&ne(n,i,i.out,r)),"directed"!==e&&ne(n,i,i.undirected,r)}("mixed"===r?this.type:r,n,i,t)};const s="map"+i[0].toUpperCase()+i.slice(1);e.prototype[s]=function(e,t){const i=[];return this[o](e,((e,r)=>{i.push(t(e,r))})),i};const a="filter"+i[0].toUpperCase()+i.slice(1);e.prototype[a]=function(e,t){const i=[];return this[o](e,((e,r)=>{t(e,r)&&i.push(e)})),i};const h="reduce"+i[0].toUpperCase()+i.slice(1);e.prototype[h]=function(e,t,i){if(arguments.length<3)throw new y(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let r=i;return this[o](e,((e,i)=>{r=t(r,e,i)})),r}}(e,t),function(e,t){const{name:i,type:r,direction:n}=t,o=i[0].toUpperCase()+i.slice(1,-1),s="find"+o;e.prototype[s]=function(e,t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return;e=""+e;const i=this._nodes.get(e);if(void 0===i)throw new b(`Graph.${s}: could not find the "${e}" node in the graph.`);return function(e,t,i,r){if("mixed"!==e){if("undirected"===e)return oe(i,i.undirected,r);if("string"==typeof t)return oe(i,i[t],r)}const n=new Set;let o;if("undirected"!==e){if("out"!==t&&(o=se(n,i,i.in,r),o))return o;if("in"!==t&&(o=se(n,i,i.out,r),o))return o}if("directed"!==e&&(o=se(n,i,i.undirected,r),o))return o}("mixed"===r?this.type:r,n,i,t)};const a="some"+o;e.prototype[a]=function(e,t){return!!this[s](e,t)};const h="every"+o;e.prototype[h]=function(e,t){return!this[s](e,((e,i)=>!t(e,i)))}}(e,t),function(e,t){const{name:i,type:r,direction:o}=t,s=i.slice(0,-1)+"Entries";e.prototype[s]=function(e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return n().empty();e=""+e;const t=this._nodes.get(e);if(void 0===t)throw new b(`Graph.${s}: could not find the "${e}" node in the graph.`);return function(e,t,i){if("mixed"!==e){if("undirected"===e)return ae(i,i.undirected);if("string"==typeof t)return ae(i,i[t])}let r=n().empty();const o=new Set;return"undirected"!==e&&("out"!==t&&(r=h()(r,he(o,i,i.in))),"in"!==t&&(r=h()(r,he(o,i,i.out)))),"directed"!==e&&(r=h()(r,he(o,i,i.undirected))),r}("mixed"===r?this.type:r,o,t)}}(e,t)}))}(_e);class we extends _e{constructor(e){const t=d({type:"directed"},e);if("multi"in t&&!1!==t.multi)throw new y("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==t.type)throw new y('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class xe extends _e{constructor(e){const t=d({type:"undirected"},e);if("multi"in t&&!1!==t.multi)throw new y("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==t.type)throw new y('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Ee extends _e{constructor(e){const t=d({multi:!0},e);if("multi"in t&&!0!==t.multi)throw new y("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Ae extends _e{constructor(e){const t=d({type:"directed",multi:!0},e);if("multi"in t&&!0!==t.multi)throw new y("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==t.type)throw new y('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Le extends _e{constructor(e){const t=d({type:"undirected",multi:!0},e);if("multi"in t&&!0!==t.multi)throw new y("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==t.type)throw new y('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function ke(e){e.from=function(t,i){const r=d({},t.options,i),n=new e(r);return n.import(t),n}}ke(_e),ke(we),ke(xe),ke(Ee),ke(Ae),ke(Le),_e.Graph=_e,_e.DirectedGraph=we,_e.UndirectedGraph=xe,_e.MultiGraph=Ee,_e.MultiDirectedGraph=Ae,_e.MultiUndirectedGraph=Le,_e.InvalidArgumentsGraphError=y,_e.NotFoundGraphError=b,_e.UsageGraphError=v})(),self.graphology=r})()},37:()=>{var e,t,i;e={796:e=>{e.exports=function(e,t){var i=t.length;if(0!==i){var r=e.length;e.length+=i;for(var n=0;n<i;n++)e[r+n]=t[n]}}},171:(e,t,i)=>{var r=i(186),n=i(937),o=i(796);function s(e,t,i){if(!r(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');if(!e.hasNode(i))throw new Error('graphology-shortest-path: the "'+i+'" target node does not exist in the given graph.');if((t=""+t)==(i=""+i))return[t];var n=e.inboundNeighbors.bind(e),o=e.outboundNeighbors.bind(e),s={},a={};s[t]=null,a[i]=null;var h,d,u,c,l,p,f,g,m=[t],y=[i],b=!1;e:for(;m.length&&y.length;)if(m.length<=y.length){for(h=m,m=[],l=0,f=h.length;l<f;l++)for(p=0,g=(u=o(d=h[l])).length;p<g;p++)if((c=u[p])in s||(m.push(c),s[c]=d),c in a){b=!0;break e}}else for(h=y,y=[],l=0,f=h.length;l<f;l++)for(p=0,g=(u=n(d=h[l])).length;p<g;p++)if((c=u[p])in a||(y.push(c),a[c]=d),c in s){b=!0;break e}if(!b)return null;for(var v=[];c;)v.unshift(c),c=s[c];for(c=a[v[v.length-1]];c;)v.push(c),c=a[c];return v.length?v:null}function a(e,t){if(!r(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');var i,n,o,s,a,h,d={},u={};for(d[t=""+t]=!0,u[t]=[t];Object.keys(d).length;)for(o in i=d,d={},i)for(a=0,h=(n=e.outboundNeighbors(o)).length;a<h;a++)u[s=n[a]]||(u[s]=u[o].concat(s),d[s]=!0);return u}function h(e,t,i){if(!r(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!t.hasNode(i))throw new Error('graphology-shortest-path: the "'+i+'" source node does not exist in the given graph.');i=""+i;var n=new Set,s={},a=0;s[i]=0;for(var h,d,u,c=[i];0!==c.length;){var l=[];for(h=0,d=c.length;h<d;h++)u=c[h],n.has(u)||(n.add(u),o(l,t[e](u)),s[u]=a);a++,c=l}return s}var d=h.bind(null,"outboundNeighbors"),u=h.bind(null,"neighbors");function c(e,t,i){return arguments.length<3?a(e,t):s(e,t,i)}c.bidirectional=s,c.singleSource=a,c.singleSourceLength=d,c.undirectedSingleSourceLength=u,c.brandes=function(e,t){t=""+t;var i,r,o,s,a,h,d,u,c,l=[],p={},f={},g=e.nodes();for(h=0,u=g.length;h<u;h++)p[s=g[h]]=[],f[s]=0;var m={};f[t]=1,m[t]=0;for(var y=n.of(t);y.size;)for(s=y.dequeue(),l.push(s),i=m[s],r=f[s],d=0,c=(o=e.outboundNeighbors(s)).length;d<c;d++)(a=o[d])in m||(y.enqueue(a),m[a]=i+1),m[a]===i+1&&(f[a]+=r,p[a].push(s));return[l,p,f]},e.exports=c},186:e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},937:(e,t,i)=>{var r=i(993),n=i(113);function o(){this.clear()}o.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},o.prototype.enqueue=function(e){return this.items.push(e),++this.size},o.prototype.dequeue=function(){if(this.size){var e=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,e}},o.prototype.peek=function(){if(this.size)return this.items[this.offset]},o.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var i=this.offset,r=0,n=this.items.length;i<n;i++,r++)e.call(t,this.items[i],r,this)},o.prototype.toArray=function(){return this.items.slice(this.offset)},o.prototype.values=function(){var e=this.items,t=this.offset;return new r((function(){if(t>=e.length)return{done:!0};var i=e[t];return t++,{value:i,done:!1}}))},o.prototype.entries=function(){var e=this.items,t=this.offset,i=0;return new r((function(){if(t>=e.length)return{done:!0};var r=e[t];return t++,{value:[i++,r],done:!1}}))},"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.toString=function(){return this.toArray().join(",")},o.prototype.toJSON=function(){return this.toArray()},o.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:o,enumerable:!1}),e},"undefined"!=typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(e){var t=new o;return n(e,(function(e){t.enqueue(e)})),t},o.of=function(){return o.from(arguments)},e.exports=o},113:(e,t,i)=>{var r=i(844),n=r.ARRAY_BUFFER_SUPPORT,o=r.SYMBOL_SUPPORT;e.exports=function(e,t){var i,r,s,a,h;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof t)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||n&&ArrayBuffer.isView(e)||"string"==typeof e||"[object Arguments]"===e.toString())for(s=0,a=e.length;s<a;s++)t(e[s],s);else if("function"!=typeof e.forEach)if(o&&Symbol.iterator in e&&"function"!=typeof e.next&&(e=e[Symbol.iterator]()),"function"!=typeof e.next)for(r in e)e.hasOwnProperty(r)&&t(e[r],r);else for(i=e,s=0;!0!==(h=i.next()).done;)t(h.value,s),s++;else e.forEach(t)}},993:e=>{function t(e){if("function"!=typeof e)throw new Error("obliterator/iterator: expecting a function!");this.next=e}"undefined"!=typeof Symbol&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,i=e.length,r=0;return new t((function(){return r>=i?{done:!0}:{done:!1,value:e[r++]}}))},t.empty=function(){return new t((function(){return{done:!0}}))},t.fromSequence=function(e){var i=0,r=e.length;return new t((function(){return i>=r?{done:!0}:{done:!1,value:e[i++]}}))},t.is=function(e){return e instanceof t||"object"==typeof e&&null!==e&&"function"==typeof e.next},e.exports=t},844:(e,t)=>{t.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,t.SYMBOL_SUPPORT="undefined"!=typeof Symbol}},t={},i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}(171),self.shortestPath=i},686:()=>{var e,t,i;e={934:e=>{var t;self,t=function(){return(()=>{var e=[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Sigma=t.MouseCaptor=t.QuadTree=t.Camera=void 0;var n=r(i(1));t.Sigma=n.default;var o=r(i(5));t.Camera=o.default;var s=r(i(12));t.QuadTree=s.default;var a=r(i(10));t.MouseCaptor=a.default,t.default=n.default},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(2),h=s(i(3)),d=s(i(5)),u=s(i(10)),c=s(i(12)),l=i(7),p=i(14),f=i(15),g=s(i(35)),m=i(8),y=i(36),b=h.default.nodeExtent,v=(0,l.getPixelRatio)();function _(e,t,i){if(!i.hasOwnProperty("x")||!i.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'+t+'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?');return i.color||(i.color=e.defaultNodeColor),i.label||""===i.label||(i.label=null),void 0!==i.label&&null!==i.label?i.label=""+i.label:i.label=null,i.size||(i.size=2),i.hasOwnProperty("hidden")||(i.hidden=!1),i.hasOwnProperty("highlighted")||(i.highlighted=!1),i.type&&""!==i.type||(i.type=e.defaultNodeType),i.zIndex||(i.zIndex=0),i}function w(e,t,i){return i.color||(i.color=e.defaultEdgeColor),i.label||(i.label=""),i.size||(i.size=.5),i.hasOwnProperty("hidden")||(i.hidden=!1),i.type&&""!==i.type||(i.type=e.defaultEdgeType),i.zIndex||(i.zIndex=0),i}var x=function(e){function t(t,i,r){void 0===r&&(r={});var n=e.call(this)||this;if(n.elements={},n.canvasContexts={},n.webGLContexts={},n.activeListeners={},n.quadtree=new c.default,n.labelGrid=new p.LabelGrid,n.nodeDataCache={},n.edgeDataCache={},n.nodeKeyToIndex={},n.edgeKeyToIndex={},n.nodeExtent={x:[0,1],y:[0,1]},n.matrix=(0,m.identity)(),n.invMatrix=(0,m.identity)(),n.correctionRatio=1,n.customBBox=null,n.normalizationFunction=(0,l.createNormalizationFunction)({x:[-1/0,1/0],y:[-1/0,1/0]}),n.cameraSizeRatio=1,n.width=0,n.height=0,n.displayedLabels=new Set,n.highlightedNodes=new Set,n.hoveredNode=null,n.hoveredEdge=null,n.renderFrame=null,n.renderHighlightedNodesFrame=null,n.needToProcess=!1,n.needToSoftProcess=!1,n.checkEdgesEventsFrame=null,n.nodePrograms={},n.hoverNodePrograms={},n.edgePrograms={},n.settings=(0,l.assign)({},f.DEFAULT_SETTINGS,r),(0,f.validateSettings)(n.settings),(0,l.validateGraph)(t),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");n.graph=t,n.container=i,n.initializeCache(),n.createWebGLContext("edges",{preserveDrawingBuffer:!0}),n.createCanvasContext("edgeLabels"),n.createWebGLContext("nodes"),n.createCanvasContext("labels"),n.createCanvasContext("hovers"),n.createWebGLContext("hoverNodes"),n.createCanvasContext("mouse");var o=n.webGLContexts.nodes;for(var s in o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),(o=n.webGLContexts.edges).blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),n.settings.nodeProgramClasses){var a=n.settings.nodeProgramClasses[s];n.nodePrograms[s]=new a(n.webGLContexts.nodes,n),n.hoverNodePrograms[s]=new a(n.webGLContexts.hoverNodes,n)}for(var s in n.settings.edgeProgramClasses){var h=n.settings.edgeProgramClasses[s];n.edgePrograms[s]=new h(n.webGLContexts.edges,n)}return n.resize(),n.camera=new d.default,n.bindCameraHandlers(),n.mouseCaptor=new u.default(n.elements.mouse,n),n.touchCaptor=new g.default(n.elements.mouse,n),n.bindEventHandlers(),n.bindGraphHandlers(),n.process(),n.render(),n}return n(t,e),t.prototype.createCanvas=function(e){var t=(0,l.createElement)("canvas",{position:"absolute"},{class:"sigma-"+e});return this.elements[e]=t,this.container.appendChild(t),t},t.prototype.createCanvasContext=function(e){var t=this.createCanvas(e);return this.canvasContexts[e]=t.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},t.prototype.createWebGLContext=function(e,t){var i,r=this.createCanvas(e),n=o({preserveDrawingBuffer:!1,antialias:!1},t||{});return(i=r.getContext("webgl2",n))||(i=r.getContext("webgl",n)),i||(i=r.getContext("experimental-webgl",n)),this.webGLContexts[e]=i,this},t.prototype.initializeCache=function(){var e=this,t=this.graph,i=0;t.forEachNode((function(t){e.nodeKeyToIndex[t]=i++})),i=0,t.forEachEdge((function(t){e.edgeKeyToIndex[t]=i++}))},t.prototype.bindCameraHandlers=function(){var e=this;return this.activeListeners.camera=function(){e._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},t.prototype.bindEventHandlers=function(){var e=this;this.activeListeners.handleResize=function(){e.needToSoftProcess=!0,e._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize);var t=function(e,t,i,r,n){return e>i-n&&e<i+n&&t>r-n&&t<r+n&&Math.sqrt(Math.pow(e-i,2)+Math.pow(t-r,2))<n};this.activeListeners.handleMove=function(i){for(var r,n,o,s=(r=i.x,n=i.y,o=e.viewportToFramedGraph({x:r,y:n}),e.quadtree.point(o.x,1-o.y)),a=1/0,h=null,d=0,u=s.length;d<u;d++){var c=s[d],p=e.nodeDataCache[c],f=e.framedGraphToViewport(p),g=e.scaleSize(p.size);if(!p.hidden&&t(i.x,i.y,f.x,f.y,g)){var m=Math.sqrt(Math.pow(i.x-f.x,2)+Math.pow(i.y-f.y,2));m<a&&(a=m,h=c)}}if(h&&e.hoveredNode!==h&&!e.nodeDataCache[h].hidden)return e.hoveredNode&&e.emit("leaveNode",{node:e.hoveredNode}),e.hoveredNode=h,e.emit("enterNode",{node:h}),void e.scheduleHighlightedNodesRender();if(e.hoveredNode&&(p=e.nodeDataCache[e.hoveredNode],f=e.framedGraphToViewport(p),g=e.scaleSize(p.size),!t(i.x,i.y,f.x,f.y,g)))return c=e.hoveredNode,e.hoveredNode=null,e.emit("leaveNode",{node:c}),e.scheduleHighlightedNodesRender();var y={x:i.x,y:i.y};!0===e.settings.enableEdgeHoverEvents?e.checkEdgeHoverEvents(y):"debounce"===e.settings.enableEdgeHoverEvents&&(e.checkEdgesEventsFrame||(e.checkEdgesEventsFrame=(0,l.requestFrame)((function(){e.checkEdgeHoverEvents(y),e.checkEdgesEventsFrame=null}))))};var i=function(t){return function(i){var r={event:i,preventSigmaDefault:function(){this.event.preventSigmaDefault()}};if(e.hoveredNode)return e.emit(t+"Node",o(o({},r),{node:e.hoveredNode}));if("wheel"===t?e.settings.enableEdgeWheelEvents:e.settings.enableEdgeClickEvents){var n=e.getEdgeAtPoint(i.x,i.y);if(n)return e.emit(t+"Edge",o(o({},r),{edge:n}))}return e.emit(t+"Stage",r)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},t.prototype.bindGraphHandlers=function(){var e=this,t=this.graph;return this.activeListeners.graphUpdate=function(){e.needToProcess=!0,e._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){e.needToSoftProcess=!0,e._scheduleRefresh()},this.activeListeners.addNodeGraphUpdate=function(i){e.nodeKeyToIndex[i.key]=t.order-1,e.activeListeners.graphUpdate()},this.activeListeners.addEdgeGraphUpdate=function(i){e.nodeKeyToIndex[i.key]=t.order-1,e.activeListeners.graphUpdate()},t.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.on("nodeDropped",this.activeListeners.graphUpdate),t.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),t.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),t.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.on("edgeDropped",this.activeListeners.graphUpdate),t.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),t.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),t.on("edgesCleared",this.activeListeners.graphUpdate),t.on("cleared",this.activeListeners.graphUpdate),this},t.prototype.checkEdgeHoverEvents=function(e){var t=this.hoveredNode?null:this.getEdgeAtPoint(e.x,e.y);return t!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",{edge:this.hoveredEdge}),t&&this.emit("enterEdge",{edge:t}),this.hoveredEdge=t),this},t.prototype.getEdgeAtPoint=function(e,t){var i=this,r=this.edgeDataCache,n=this.nodeDataCache;if(!(0,y.isPixelColored)(this.webGLContexts.edges,e*v,t*v))return null;var o=this.viewportToGraph({x:e,y:t}),s=o.x,a=o.y,h=0;return this.graph.someEdge((function(e,t,o,s,a,d){var u=a.x,c=a.y,l=d.x,p=d.y;if(r[e].hidden||n[o].hidden||n[s].hidden)return!1;if(u!==l||c!==p){var f=Math.sqrt(Math.pow(l-u,2)+Math.pow(p-c,2)),g=i.graphToViewport({x:u,y:c}),m=g.x,y=g.y,b=i.graphToViewport({x:l,y:p}),v=b.x,_=b.y,w=Math.sqrt(Math.pow(v-m,2)+Math.pow(_-y,2));return h=f/w,!0}})),h&&this.graph.findEdge((function(e,t,n,o,d,u){if((0,y.doEdgeCollideWithPoint)(s,a,d.x,d.y,u.x,u.y,r[e].size*h/i.cameraSizeRatio))return!0}))||null},t.prototype.process=function(e){var t=this;void 0===e&&(e=!1);var i=this.graph,r=this.settings,n=this.getDimensions(),o=[1/0,-1/0],s=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(n,r.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=b(i,["x","y"]);var a=new d.default,h=(0,l.matrixFromCamera)(a.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,l.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var u={},c=i.nodes(),p=0,f=c.length;p<f;p++){var g=c[p],m=Object.assign({},i.getNodeAttributes(g));r.nodeReducer&&(m=r.nodeReducer(g,m)),u[(v=_(this.settings,g,m)).type]=(u[v.type]||0)+1,this.nodeDataCache[g]=v,this.normalizationFunction.applyTo(v),this.settings.zIndex&&(v.zIndex<o[0]&&(o[0]=v.zIndex),v.zIndex>o[1]&&(o[1]=v.zIndex))}for(var y in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(y))throw new Error('Sigma: could not find a suitable program for node type "'+y+'"!');e||this.nodePrograms[y].allocate(u[y]||0),u[y]=0}for(this.settings.zIndex&&o[0]!==o[1]&&(c=(0,l.zIndexOrdering)(o,(function(e){return t.nodeDataCache[e].zIndex}),c)),p=0,f=c.length;p<f;p++){g=c[p];var v=this.nodeDataCache[g];this.quadtree.add(g,v.x,1-v.y,v.size/this.width),v.label&&this.labelGrid.add(g,v.size,this.framedGraphToViewport(v,{matrix:h})),this.nodePrograms[v.type].process(v,v.hidden,u[v.type]++),v.highlighted&&!v.hidden&&this.highlightedNodes.add(g),this.nodeKeyToIndex[g]=p}this.labelGrid.organize();var x={},E=i.edges();for(p=0,f=E.length;p<f;p++){var A=E[p];m=Object.assign({},i.getEdgeAttributes(A)),r.edgeReducer&&(m=r.edgeReducer(A,m)),x[(v=w(this.settings,0,m)).type]=(x[v.type]||0)+1,this.edgeDataCache[A]=v,this.settings.zIndex&&(v.zIndex<s[0]&&(s[0]=v.zIndex),v.zIndex>s[1]&&(s[1]=v.zIndex))}for(var y in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(y))throw new Error('Sigma: could not find a suitable program for edge type "'+y+'"!');e||this.edgePrograms[y].allocate(x[y]||0),x[y]=0}for(this.settings.zIndex&&s[0]!==s[1]&&(E=(0,l.zIndexOrdering)(s,(function(e){return t.edgeDataCache[e].zIndex}),E)),p=0,f=E.length;p<f;p++){A=E[p],v=this.edgeDataCache[A];var L=i.extremities(A),k=this.nodeDataCache[L[0]],S=this.nodeDataCache[L[1]],M=v.hidden||k.hidden||S.hidden;this.edgePrograms[v.type].process(k,S,v,M,x[v.type]++),this.nodeKeyToIndex[A]=p}for(var y in this.edgePrograms){var C=this.edgePrograms[y];e||"function"!=typeof C.computeIndices||C.computeIndices()}return this},t.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},t.prototype._scheduleRefresh=function(){var e=this;return this.renderFrame||(this.renderFrame=(0,l.requestFrame)((function(){e._refresh(),e.renderFrame=null}))),this},t.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var e,t=this.camera.getState();if(t.ratio>=1)e=new Set(this.graph.nodes());else{var i=this.viewRectangle();e=new Set(this.quadtree.rectangle(i.x1,1-i.y1,i.x2,1-i.y2,i.height))}var r=this.labelGrid.getLabelsToDisplay(t.ratio,this.settings.labelDensity);this.displayedLabels=new Set;for(var n=this.canvasContexts.labels,o=0,s=r.length;o<s;o++){var a=r[o],h=this.nodeDataCache[a];if(!h.hidden){var d=this.framedGraphToViewport(h),u=d.x,c=d.y,l=this.scaleSize(h.size);l<this.settings.labelRenderedSizeThreshold||e.has(a)&&(this.displayedLabels.add(a),this.settings.labelRenderer(n,{key:a,label:h.label,color:h.color,size:l,x:u,y:c},this.settings))}}return this},t.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);for(var t=(0,p.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}),i=0,r=t.length;i<r;i++){var n=t[i],s=this.graph.extremities(n),a=this.nodeDataCache[s[0]],h=this.nodeDataCache[s[1]],d=this.edgeDataCache[n];d.hidden||a.hidden||h.hidden||this.settings.edgeLabelRenderer(e,{key:n,label:d.label,color:d.color,size:this.scaleSize(d.size)},o(o(o({key:s[0]},a),this.framedGraphToViewport(a)),{size:this.scaleSize(a.size)}),o(o(o({key:s[1]},h),this.framedGraphToViewport(h)),{size:this.scaleSize(h.size)}),this.settings)}return this},t.prototype.renderHighlightedNodes=function(){var e=this,t=this.canvasContexts.hovers;t.clearRect(0,0,this.width,this.height);var i=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&i.push(this.hoveredNode),this.highlightedNodes.forEach((function(t){t!==e.hoveredNode&&i.push(t)})),i.forEach((function(i){return function(i){var r=e.nodeDataCache[i],n=e.framedGraphToViewport(r),o=n.x,s=n.y,a=e.scaleSize(r.size);e.settings.hoverRenderer(t,{key:i,label:r.label,color:r.color,size:a,x:o,y:s},e.settings)}(i)}));var r={};for(var n in i.forEach((function(t){var i=e.nodeDataCache[t].type;r[i]=(r[i]||0)+1})),this.hoverNodePrograms)this.hoverNodePrograms[n].allocate(r[n]||0),r[n]=0;for(var n in i.forEach((function(t){var i=e.nodeDataCache[t];e.hoverNodePrograms[i.type].process(i,i.hidden,r[i.type]++)})),this.hoverNodePrograms){var o=this.hoverNodePrograms[n];o.bind(),o.bufferData(),o.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:v})}},t.prototype.scheduleHighlightedNodesRender=function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,l.requestFrame)((function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()})))},t.prototype.render=function(){if(this.renderFrame&&((0,l.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return this;var e=this.mouseCaptor,t=this.camera.isAnimated()||e.isMoving||e.draggedEvents||e.currentWheelDirection,i=this.camera.getState(),r=this.getDimensions(),n=this.getGraphDimensions(),o=this.getSetting("stagePadding")||0;for(var s in this.matrix=(0,l.matrixFromCamera)(i,r,n,o),this.invMatrix=(0,l.matrixFromCamera)(i,r,n,o,!0),this.correctionRatio=(0,l.getMatrixImpact)(this.matrix,i,r),this.nodePrograms)(a=this.nodePrograms[s]).bind(),a.bufferData(),a.render({matrix:this.matrix,width:this.width,height:this.height,ratio:i.ratio,correctionRatio:this.correctionRatio/i.ratio,scalingRatio:v});if(!this.settings.hideEdgesOnMove||!t)for(var s in this.edgePrograms){var a;(a=this.edgePrograms[s]).bind(),a.bufferData(),a.render({matrix:this.matrix,width:this.width,height:this.height,ratio:i.ratio,correctionRatio:this.correctionRatio/i.ratio,scalingRatio:v})}return this.settings.hideLabelsOnMove&&t||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes(),this.emit("afterRender")),this},t.prototype.updateCachedValues=function(){var e=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(e)},t.prototype.getCamera=function(){return this.camera},t.prototype.getGraph=function(){return this.graph},t.prototype.getMouseCaptor=function(){return this.mouseCaptor},t.prototype.getTouchCaptor=function(){return this.touchCaptor},t.prototype.getDimensions=function(){return{width:this.width,height:this.height}},t.prototype.getGraphDimensions=function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}},t.prototype.getNodeDisplayData=function(e){var t=this.nodeDataCache[e];return t?Object.assign({},t):void 0},t.prototype.getEdgeDisplayData=function(e){var t=this.edgeDataCache[e];return t?Object.assign({},t):void 0},t.prototype.getSettings=function(){return o({},this.settings)},t.prototype.getSetting=function(e){return this.settings[e]},t.prototype.setSetting=function(e,t){return this.settings[e]=t,(0,f.validateSettings)(this.settings),this.needToProcess=!0,this._scheduleRefresh(),this},t.prototype.updateSetting=function(e,t){return this.settings[e]=t(this.settings[e]),(0,f.validateSettings)(this.settings),this.needToProcess=!0,this._scheduleRefresh(),this},t.prototype.resize=function(){var e=this.width,t=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,0===this.width)throw new Error("Sigma: container has no width.");if(0===this.height)throw new Error("Sigma: container has no height.");if(e===this.width&&t===this.height)return this;for(var i in this.elements){var r=this.elements[i];r.style.width=this.width+"px",r.style.height=this.height+"px"}for(var i in this.canvasContexts)this.elements[i].setAttribute("width",this.width*v+"px"),this.elements[i].setAttribute("height",this.height*v+"px"),1!==v&&this.canvasContexts[i].scale(v,v);for(var i in this.webGLContexts)this.elements[i].setAttribute("width",this.width*v+"px"),this.elements[i].setAttribute("height",this.height*v+"px"),this.webGLContexts[i].viewport(0,0,this.width*v,this.height*v);return this},t.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},t.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},t.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},t.prototype.getViewportZoomedState=function(e,t){var i=this.camera.getState(),r=i.ratio,n=i.angle,o=i.x,s=i.y,a=t/r,h={x:this.width/2,y:this.height/2},d=this.viewportToFramedGraph(e),u=this.viewportToFramedGraph(h);return{angle:n,x:(d.x-u.x)*(1-a)+o,y:(d.y-u.y)*(1-a)+s,ratio:t}},t.prototype.viewRectangle=function(){var e=0*this.width/8,t=0*this.height/8,i=this.viewportToFramedGraph({x:0-e,y:0-t}),r=this.viewportToFramedGraph({x:this.width+e,y:0-t}),n=this.viewportToFramedGraph({x:0,y:this.height+t});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-n.y}},t.prototype.framedGraphToViewport=function(e,t){void 0===t&&(t={});var i=!!t.cameraState||!!t.viewportDimensions||!!t.graphDimensions,r=t.matrix?t.matrix:i?(0,l.matrixFromCamera)(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getSetting("stagePadding")||0):this.matrix,n=[e.x,e.y,1],o=(0,m.multiplyVec)(r,n);return{x:(1+o[0])*this.width/2,y:(1-o[1])*this.height/2}},t.prototype.viewportToFramedGraph=function(e,t){void 0===t&&(t={});var i=!!t.cameraState||!!t.viewportDimensions||!t.graphDimensions,r=t.matrix?t.matrix:i?(0,l.matrixFromCamera)(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,n=[e.x/this.width*2-1,1-e.y/this.height*2,1],o=(0,m.multiplyVec)(r,n);return{x:o[0],y:o[1]}},t.prototype.viewportToGraph=function(e){return this.normalizationFunction.inverse(this.viewportToFramedGraph(e))},t.prototype.graphToViewport=function(e){return this.framedGraphToViewport(this.normalizationFunction(e))},t.prototype.getBBox=function(){return b(this.graph,["x","y"])},t.prototype.getCustomBBox=function(){return this.customBBox},t.prototype.setCustomBBox=function(e){return this.customBBox=e,this._scheduleRefresh(),this},t.prototype.kill=function(){var e=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.graphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.graphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("edgesCleared",this.activeListeners.graphUpdate),e.removeListener("cleared",this.activeListeners.graphUpdate),this.quadtree=new c.default,this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&((0,l.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,l.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var t=this.container;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.scaleSize=function(e){return e/this.cameraSizeRatio},t.prototype.getCanvases=function(){return o({},this.elements)},t}(a.EventEmitter);t.default=x},e=>{"use strict";var t,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,r){function n(i){e.removeListener(t,o),r(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,i,r){var n,o,s,d;if(a(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),s=o[t]),void 0===s)s=o[t]=i,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),(n=h(e))>0&&s.length>n&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,d=u,console&&console.warn&&console.warn(d)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=u.bind(r);return n.listener=i,r.wrapFn=n,n}function l(e,t,i){var r=e._events;if(void 0===r)return[];var n=r[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):f(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function g(e,t,i,r){if("function"==typeof e.on)r.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){r.once&&e.removeEventListener(t,n),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var h=o[e];if(void 0===h)return!1;if("function"==typeof h)r(h,this,t);else{var d=h.length,u=f(h,d);for(i=0;i<d;++i)r(u[i],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,r,n,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){s=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,o=Object.keys(i);for(r=0;r<o.length;++r)"removeListener"!==(n=o[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return l(this,e,!0)},o.prototype.rawListeners=function(e){return l(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},(e,t,i)=>{var r=i(4);function n(e,t){if(!r(e))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var i,n,o,s=[].concat(t),a={};for(o=0;o<s.length;o++)n=s[o],a[n]=[1/0,-1/0];return e.forEachNode((function(e,t){for(o=0;o<s.length;o++)n=s[o],(i=t[n])<a[n][0]&&(a[n][0]=i),i>a[n][1]&&(a[n][1]=i)})),"string"==typeof t?a[t]:a}var o=n;o.nodeExtent=n,o.edgeExtent=function(e,t){if(!r(e))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var i,n,o,s=[].concat(t),a={};for(o=0;o<s.length;o++)n=s[o],a[n]=[1/0,-1/0];return e.forEachEdge((function(e,t){for(o=0;o<s.length;o++)n=s[o],(i=t[n])<a[n][0]&&(a[n][0]=i),i>a[n][1]&&(a[n][1]=i)})),"string"==typeof t?a[t]:a},e.exports=o},e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),a=i(6),h=o(i(9)),d=i(7),u=1.5,c=function(e){function t(){var t=e.call(this)||this;return t.x=.5,t.y=.5,t.angle=0,t.ratio=1,t.nextFrame=null,t.previousState=null,t.enabled=!0,t.previousState=t.getState(),t}return n(t,e),t.from=function(e){return(new t).setState(e)},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},t.prototype.hasState=function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle},t.prototype.getPreviousState=function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null},t.prototype.isAnimated=function(){return!!this.nextFrame},t.prototype.setState=function(e){return this.enabled?(this.previousState=this.getState(),"number"==typeof e.x&&(this.x=e.x),"number"==typeof e.y&&(this.y=e.y),"number"==typeof e.angle&&(this.angle=e.angle),"number"==typeof e.ratio&&(this.ratio=e.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this):this},t.prototype.animate=function(e,t,i){var r=this;if(this.enabled){var n=Object.assign({},a.ANIMATE_DEFAULTS,t),o="function"==typeof n.easing?n.easing:h.default[n.easing],s=Date.now(),u=this.getState(),c=function(){var t=(Date.now()-s)/n.duration;if(t>=1)return r.nextFrame=null,r.setState(e),void(r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0));var i=o(t),a={};e.x&&(a.x=u.x+(e.x-u.x)*i),e.y&&(a.y=u.y+(e.y-u.y)*i),e.angle&&(a.angle=u.angle+(e.angle-u.angle)*i),e.ratio&&(a.ratio=u.ratio+(e.ratio-u.ratio)*i),r.setState(a),r.nextFrame=(0,d.requestFrame)(c)};this.nextFrame?((0,d.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,d.requestFrame)(c)):c(),this.animationCallback=i}},t.prototype.animatedZoom=function(e){if(e){if("number"==typeof e)return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||u)},e)}else this.animate({ratio:this.ratio/u})},t.prototype.animatedUnzoom=function(e){if(e){if("number"==typeof e)return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||u)},e)}else this.animate({ratio:this.ratio*u})},t.prototype.animatedReset=function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)},t.prototype.copy=function(){return t.from(this.getState())},t}(s.EventEmitter);t.default=c},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.animateNodes=t.ANIMATE_DEFAULTS=void 0;var n=i(7),o=r(i(9));t.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},t.animateNodes=function(e,i,r,s){var a=Object.assign({},t.ANIMATE_DEFAULTS,r),h="function"==typeof a.easing?a.easing:o.default[a.easing],d=Date.now(),u={};for(var c in i){var l=i[c];for(var p in u[c]={},l)u[c][p]=e.getNodeAttribute(c,p)}var f=null,g=function(){var t=(Date.now()-d)/a.duration;if(t>=1){for(var r in i){var o=i[r];for(var c in o)e.setNodeAttribute(r,c,o[c])}"function"==typeof s&&s()}else{for(var r in t=h(t),i){o=i[r];var l=u[r];for(var c in o)e.setNodeAttribute(r,c,o[c]*t+l[c]*(1-t))}f=(0,n.requestFrame)(g)}};return g(),function(){f&&(0,n.cancelFrame)(f)}}},function(e,t,i){"use strict";var r=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateGraph=t.canUse32BitsIndices=t.extractPixel=t.getMatrixImpact=t.matrixFromCamera=t.getCorrectionRatio=t.floatColor=t.zIndexOrdering=t.createNormalizationFunction=t.getPixelRatio=t.createElement=t.cancelFrame=t.requestFrame=t.assignDeep=t.assign=t.isPlainObject=void 0;var o=n(i(4)),s=i(8);function a(e){return"object"==typeof e&&null!==e&&e.constructor===Object}t.isPlainObject=a,t.assign=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];e=e||{};for(var r=0,n=t.length;r<n;r++){var o=t[r];o&&Object.assign(e,o)}return e},t.assignDeep=function e(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];t=t||{};for(var n=0,o=i.length;n<o;n++){var s=i[n];if(s)for(var h in s)a(s[h])?t[h]=e(t[h],s[h]):t[h]=s[h]}return t},t.requestFrame="undefined"!=typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,0)},t.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:function(e){return clearTimeout(e)},t.createElement=function(e,t,i){var r=document.createElement(e);if(t)for(var n in t)r.style[n]=t[n];if(i)for(var n in i)r.setAttribute(n,i[n]);return r},t.getPixelRatio=function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},t.createNormalizationFunction=function(e){var t=r(e.x,2),i=t[0],n=t[1],o=r(e.y,2),s=o[0],a=o[1],h=Math.max(n-i,a-s);0===h&&(h=1);var d=(n+i)/2,u=(a+s)/2,c=function(e){return{x:.5+(e.x-d)/h,y:.5+(e.y-u)/h}};return c.applyTo=function(e){e.x=.5+(e.x-d)/h,e.y=.5+(e.y-u)/h},c.inverse=function(e){return{x:d+h*(e.x-.5),y:u+h*(e.y-.5)}},c.ratio=h,c},t.zIndexOrdering=function(e,t,i){return i.sort((function(e,i){var r=t(e)||0,n=t(i)||0;return r<n?-1:r>n?1:0}))};var h={},d=new Int8Array(4),u=new Int32Array(d.buffer,0,1),c=new Float32Array(d.buffer,0,1),l=/^\s*rgba?\s*\(/,p=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function f(e,t){var i=e.height/e.width,r=t.height/t.width;return i<1&&r>1||i>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/i,i))}t.floatColor=function(e){if(void 0!==h[e])return h[e];var t=0,i=0,r=0,n=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),i=parseInt(e.charAt(2)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),i=parseInt(e.charAt(3)+e.charAt(4),16),r=parseInt(e.charAt(5)+e.charAt(6),16));else if(l.test(e)){var o=e.match(p);o&&(t=+o[1],i=+o[2],r=+o[3],o[4]&&(n=+o[4]))}n=255*n|0,u[0]=4278190079&(n<<24|r<<16|i<<8|t);var s=c[0];return h[e]=s,s},t.getCorrectionRatio=f,t.matrixFromCamera=function(e,t,i,r,n){var o=e.angle,a=e.ratio,h=e.x,d=e.y,u=t.width,c=t.height,l=(0,s.identity)(),p=Math.min(u,c)-2*r,g=f(t,i);return n?((0,s.multiply)(l,(0,s.translate)((0,s.identity)(),h,d)),(0,s.multiply)(l,(0,s.scale)((0,s.identity)(),a)),(0,s.multiply)(l,(0,s.rotate)((0,s.identity)(),o)),(0,s.multiply)(l,(0,s.scale)((0,s.identity)(),u/p/2/g,c/p/2/g))):((0,s.multiply)(l,(0,s.scale)((0,s.identity)(),p/u*2*g,p/c*2*g)),(0,s.multiply)(l,(0,s.rotate)((0,s.identity)(),-o)),(0,s.multiply)(l,(0,s.scale)((0,s.identity)(),1/a)),(0,s.multiply)(l,(0,s.translate)((0,s.identity)(),-h,-d))),l},t.getMatrixImpact=function(e,t,i){var n=r((0,s.multiplyVec)(e,[Math.cos(t.angle),Math.sin(t.angle),0]),2),o=n[0],a=n[1];return 1/Math.sqrt(Math.pow(o,2)+Math.pow(a,2))/i.width},t.extractPixel=function(e,t,i,r){var n=r||new Uint8Array(4);return e.readPixels(t,i,1,1,e.RGBA,e.UNSIGNED_BYTE,n),n},t.canUse32BitsIndices=function(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||!!e.getExtension("OES_element_index_uint")},t.validateGraph=function(e){if(!(0,o.default)(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode((function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node "+e+" are invalid. A node must have a numeric 'x' and 'y' attribute.")}))}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiplyVec=t.multiply=t.translate=t.rotate=t.scale=t.identity=void 0,t.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},t.scale=function(e,t,i){return e[0]=t,e[4]="number"==typeof i?i:t,e},t.rotate=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[3]=-i,e[4]=r,e},t.translate=function(e,t,i){return e[6]=t,e[7]=i,e},t.multiply=function(e,t){var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],d=e[7],u=e[8],c=t[0],l=t[1],p=t[2],f=t[3],g=t[4],m=t[5],y=t[6],b=t[7],v=t[8];return e[0]=c*i+l*o+p*h,e[1]=c*r+l*s+p*d,e[2]=c*n+l*a+p*u,e[3]=f*i+g*o+m*h,e[4]=f*r+g*s+m*d,e[5]=f*n+g*a+m*u,e[6]=y*i+b*o+v*h,e[7]=y*r+b*s+v*d,e[8]=y*n+b*a+v*u,e},t.multiplyVec=function(e,t){var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],d=e[7],u=e[8],c=t[0],l=t[1],p=t[2],f=Array.isArray(t)?[0,0,0]:Float32Array.of(0,0,0);return f[0]=c*i+l*o+p*h,f[1]=c*r+l*s+p*d,f[2]=c*n+l*a+p*u,f}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cubicInOut=t.cubicOut=t.cubicIn=t.quadraticInOut=t.quadraticOut=t.quadraticIn=t.linear=void 0,t.linear=function(e){return e},t.quadraticIn=function(e){return e*e},t.quadraticOut=function(e){return e*(2-e)},t.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.cubicIn=function(e){return e*e*e},t.cubicOut=function(e){return--e*e*e+1},t.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};var i={linear:t.linear,quadraticIn:t.quadraticIn,quadraticOut:t.quadraticOut,quadraticInOut:t.quadraticInOut,cubicIn:t.cubicIn,cubicOut:t.cubicOut,cubicInOut:t.cubicInOut};t.default=i},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var h=a(i(11)),d=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.enabled=!0,r.draggedEvents=0,r.downStartTime=null,r.lastMouseX=null,r.lastMouseY=null,r.isMouseDown=!1,r.isMoving=!1,r.movingTimeout=null,r.startCameraState=null,r.clicks=0,r.doubleClickTimeout=null,r.currentWheelDirection=0,r.handleClick=r.handleClick.bind(r),r.handleRightClick=r.handleRightClick.bind(r),r.handleDown=r.handleDown.bind(r),r.handleUp=r.handleUp.bind(r),r.handleMove=r.handleMove.bind(r),r.handleWheel=r.handleWheel.bind(r),r.handleOut=r.handleOut.bind(r),t.addEventListener("click",r.handleClick,!1),t.addEventListener("contextmenu",r.handleRightClick,!1),t.addEventListener("mousedown",r.handleDown,!1),t.addEventListener("wheel",r.handleWheel,!1),t.addEventListener("mouseout",r.handleOut,!1),document.addEventListener("mousemove",r.handleMove,!1),document.addEventListener("mouseup",r.handleUp,!1),r}return n(t,e),t.prototype.kill=function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},t.prototype.handleClick=function(e){var t=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout((function(){t.clicks=0,t.doubleClickTimeout=null}),300),this.draggedEvents<3&&this.emit("click",(0,h.getMouseCoords)(e,this.container))}},t.prototype.handleRightClick=function(e){this.enabled&&this.emit("rightClick",(0,h.getMouseCoords)(e,this.container))},t.prototype.handleDoubleClick=function(e){if(this.enabled){e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var t=(0,h.getMouseCoords)(e,this.container);if(this.emit("doubleClick",t),t.sigmaDefaultPrevented)return!1;var i=this.renderer.getCamera(),r=i.getState().ratio/2.2;return i.animate(this.renderer.getViewportZoomedState((0,h.getPosition)(e,this.container),r),{easing:"quadraticInOut",duration:200}),!1}},t.prototype.handleDown=function(e){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var t=(0,h.getPosition)(e,this.container),i=t.x,r=t.y;this.lastMouseX=i,this.lastMouseY=r,this.draggedEvents=0,this.downStartTime=Date.now(),e.which,this.isMouseDown=!0,this.emit("mousedown",(0,h.getMouseCoords)(e,this.container))}},t.prototype.handleUp=function(e){var t=this;if(this.enabled&&this.isMouseDown){var i=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var r=(0,h.getPosition)(e,this.container),n=r.x,o=r.y,s=i.getState(),a=i.getPreviousState()||{x:0,y:0};this.isMoving?i.animate({x:s.x+3*(s.x-a.x),y:s.y+3*(s.y-a.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===n&&this.lastMouseY===o||i.setState({x:s.x,y:s.y}),this.isMoving=!1,setTimeout((function(){t.draggedEvents=0,t.renderer.refresh()}),0),this.emit("mouseup",(0,h.getMouseCoords)(e,this.container))}},t.prototype.handleMove=function(e){var t=this;if(this.enabled){var i=(0,h.getMouseCoords)(e,this.container);if(this.emit("mousemovebody",i),e.target===this.container&&(this.emit("mousemove",i),this.isMouseDown)){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){t.movingTimeout=null,t.isMoving=!1}),100);var r=this.renderer.getCamera(),n=(0,h.getPosition)(e,this.container),o=n.x,s=n.y,a=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),d=this.renderer.viewportToFramedGraph({x:o,y:s}),u=a.x-d.x,c=a.y-d.y,l=r.getState(),p=l.x+u,f=l.y+c;return r.setState({x:p,y:f}),this.lastMouseX=o,this.lastMouseY=s,e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}}},t.prototype.handleWheel=function(e){var t=this;if(!this.enabled)return!1;e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var i=(0,h.getWheelDelta)(e);if(!i)return!1;var r=(0,h.getWheelCoords)(e,this.container);if(this.emit("wheel",r),r.sigmaDefaultPrevented)return!1;var n=i>0?1/1.7:1.7,o=this.renderer.getCamera(),s=o.getState().ratio*n,a=i>0?1:-1,d=Date.now();return this.currentWheelDirection===a&&this.lastWheelTriggerTime&&d-this.lastWheelTriggerTime<50||(o.animate(this.renderer.getViewportZoomedState((0,h.getPosition)(e,this.container),s),{easing:"quadraticOut",duration:250},(function(){t.currentWheelDirection=0})),this.currentWheelDirection=a,this.lastWheelTriggerTime=d),!1},t.prototype.handleOut=function(){},t}(h.default);t.default=d},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getWheelDelta=t.getTouchCoords=t.getTouchesArray=t.getWheelCoords=t.getMouseCoords=t.getPosition=void 0;var s=i(2);function a(e,t){var i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}function h(e,t){return o(o({},a(e,t)),{clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,sigmaDefaultPrevented:!1,preventSigmaDefault:function(){this.sigmaDefaultPrevented=!0},original:e})}function d(e){for(var t=[],i=0,r=Math.min(e.length,2);i<r;i++)t.push(e[i]);return t}function u(e){if(void 0!==e.deltaY)return-3*e.deltaY/360;if(void 0!==e.detail)return e.detail/-9;throw new Error("Captor: could not extract delta from event.")}t.getPosition=a,t.getMouseCoords=h,t.getWheelCoords=function(e,t){return o(o({},h(e,t)),{deltaY:e.deltaY,delta:u(e)})},t.getTouchesArray=d,t.getTouchCoords=function(e,t){return{touches:d(e.touches).map((function(e){return a(e,t)})),ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,preventDefault:e.preventDefault.bind(e),original:e}},t.getWheelDelta=u;var c=function(e){function t(t,i){var r=e.call(this)||this;return r.container=t,r.renderer=i,r}return n(t,e),t}(s.EventEmitter);t.default=c},function(e,t,i){"use strict";var r=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rectangleCollidesWithQuad=t.squareCollidesWithQuad=t.getCircumscribedAlignedRectangle=t.isRectangleAligned=void 0;var s=o(i(13)),a=!1;function h(e){return e.x1===e.x2||e.y1===e.y2}function d(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2)),i=(e.y1-e.y2)*e.height/t,r=(e.x2-e.x1)*e.height/t,n={x:e.x1,y:e.y1},o={x:e.x2,y:e.y2},s={x:e.x1+i,y:e.y1+r},a={x:e.x2+i,y:e.y2+r},h=Math.min(n.x,o.x,s.x,a.x),d=Math.max(n.x,o.x,s.x,a.x),u=Math.min(n.y,o.y,s.y,a.y);return{x1:h,y1:u,x2:d,y2:u,height:Math.max(n.y,o.y,s.y,a.y)-u}}function u(e,t,i,r,n,o,s){return e<r+o&&e+i>r&&t<n+s&&t+i>n}function c(e,t,i,r,n,o,s,a){return e<n+s&&e+i>n&&t<o+a&&t+r>o}function l(e,t,i,r,n,o){var s=e<i+n/2;return t<r+o/2?s?1:2:s?3:4}t.isRectangleAligned=h,t.getCircumscribedAlignedRectangle=d,t.squareCollidesWithQuad=u,t.rectangleCollidesWithQuad=c;var p=function(){function e(e){var t;void 0===e&&(e={}),this.containers=((t={}).outside=[],t),this.cache=null,this.lastRectangle=null;var i=Math.pow(4,5);this.data=new Float32Array((4*i-1)/3*4),e.boundaries?this.resize(e.boundaries):this.resize({x:0,y:0,width:1,height:1})}return e.prototype.add=function(e,t,i,r){return function(e,t,i,r,n,o,s){for(var h=n-s,d=o-s,c=2*s,l=0,p=0;;){if(l>=5)return i[p]=i[p]||[],void i[p].push(r);var f=4*p+4,g=4*p+8,m=4*p+12,y=4*p+16,b=u(h,d,c,t[f+0],t[f+1],t[f+2],t[f+3]),v=u(h,d,c,t[g+0],t[g+1],t[g+2],t[g+3]),_=u(h,d,c,t[m+0],t[m+1],t[m+2],t[m+3]),w=u(h,d,c,t[y+0],t[y+1],t[y+2],t[y+3]),x=[b,v,_,w].reduce((function(e,t){return t?e+1:e}),0);if(0===x&&0===l)return i.outside.push(r),void(!a&&i.outside.length>=5&&(a=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===x)throw new Error("sigma/quadtree.insertNode: no collision (level: "+l+", key: "+r+", x: "+n+", y: "+o+", size: "+s+").");if(3===x)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: "+l+", key: "+r+", x: "+n+", y: "+o+", size: "+s+").");if(x>1)return i[p]=i[p]||[],void i[p].push(r);l++,b&&(p=f),v&&(p=g),_&&(p=m),w&&(p=y)}}(0,this.data,this.containers,e,t,i,r),this},e.prototype.resize=function(e){this.clear(),this.data[0]=e.x,this.data[1]=e.y,this.data[2]=e.width,this.data[3]=e.height,function(e,t){for(var i=[0,0];i.length;){var r=i.pop(),n=i.pop(),o=4*n+4,s=4*n+8,a=4*n+12,h=4*n+16,d=t[n+0],u=t[n+1],c=t[n+2]/2,l=t[n+3]/2;t[o+0]=d,t[o+1]=u,t[o+2]=c,t[o+3]=l,t[s+0]=d+c,t[s+1]=u,t[s+2]=c,t[s+3]=l,t[a+0]=d,t[a+1]=u+l,t[a+2]=c,t[a+3]=l,t[h+0]=d+c,t[h+1]=u+l,t[h+2]=c,t[h+3]=l,r<4&&(i.push(h,r+1),i.push(a,r+1),i.push(s,r+1),i.push(o,r+1))}}(0,this.data)},e.prototype.clear=function(){var e;return this.containers=((e={}).outside=[],e),this},e.prototype.point=function(e,t){var i=this.containers.outside,o=0,s=0;do{this.containers[o]&&i.push.apply(i,n([],r(this.containers[o]),!1)),o=4*o+4*l(e,t,this.data[o+0],this.data[o+1],this.data[o+2],this.data[o+3]),s++}while(s<=5);return i},e.prototype.rectangle=function(e,t,i,o,a){var u,l=this.lastRectangle;return l&&e===l.x1&&i===l.x2&&t===l.y1&&o===l.y2&&a===l.height||(this.lastRectangle={x1:e,y1:t,x2:i,y2:o,height:a},h(this.lastRectangle)||(this.lastRectangle=d(this.lastRectangle)),this.cache=function(e,t,i,r,n,o,a){for(var h,d=[0,0],u=[];d.length;){var l=d.pop(),p=d.pop();if((h=i[p])&&(0,s.default)(u,h),!(l>=5)){var f=4*p+4,g=4*p+8,m=4*p+12,y=4*p+16,b=c(r,n,o,a,t[f+0],t[f+1],t[f+2],t[f+3]),v=c(r,n,o,a,t[g+0],t[g+1],t[g+2],t[g+3]),_=c(r,n,o,a,t[m+0],t[m+1],t[m+2],t[m+3]),w=c(r,n,o,a,t[y+0],t[y+1],t[y+2],t[y+3]);b&&d.push(f,l+1),v&&d.push(g,l+1),_&&d.push(m,l+1),w&&d.push(y,l+1)}}return u}(0,this.data,this.containers,e,t,Math.abs(e-i)||Math.abs(t-o),a),(u=this.cache).push.apply(u,n([],r(this.containers.outside),!1))),this.cache},e}();t.default=p},e=>{e.exports=function(e,t){var i=t.length;if(0!==i){var r=e.length;e.length+=i;for(var n=0;n<i;n++)e[r+n]=t[n]}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edgeLabelsToDisplayFromNodes=t.LabelGrid=void 0;var i=function(){function e(e,t){this.key=e,this.size=t}return e.compare=function(e,t){return e.size>t.size?-1:e.size<t.size||e.key>t.key?1:-1},e}(),r=function(){function e(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return e.prototype.resizeAndClear=function(e,t){this.width=e.width,this.height=e.height,this.cellSize=t,this.columns=Math.ceil(e.width/t),this.rows=Math.ceil(e.height/t),this.cells={}},e.prototype.getIndex=function(e){var t=Math.floor(e.x/this.cellSize),i=Math.floor(e.y/this.cellSize);return t*this.columns+i},e.prototype.add=function(e,t,r){var n=new i(e,t),o=this.getIndex(r),s=this.cells[o];s||(s=[],this.cells[o]=s),s.push(n)},e.prototype.organize=function(){for(var e in this.cells)this.cells[e].sort(i.compare)},e.prototype.getLabelsToDisplay=function(e,t){var i=this.cellSize*this.cellSize,r=i/e/e*t/i,n=Math.ceil(r),o=[];for(var s in this.cells)for(var a=this.cells[s],h=0;h<Math.min(n,a.length);h++)o.push(a[h].key);return o},e}();t.LabelGrid=r,t.edgeLabelsToDisplayFromNodes=function(e){var t=e.graph,i=e.hoveredNode,r=e.highlightedNodes,n=e.displayedNodeLabels,o=[];return t.forEachEdge((function(e,t,s,a){(s===i||a===i||r.has(s)||r.has(a)||n.has(s)&&n.has(a))&&o.push(e)})),o}},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SETTINGS=t.validateSettings=void 0;var n=r(i(16)),o=r(i(17)),s=r(i(18)),a=r(i(19)),h=r(i(25)),d=r(i(29));t.validateSettings=function(e){if("number"!=typeof e.labelDensity||e.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.")},t.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:.07,labelGridCellSize:60,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,labelRenderer:n.default,hoverRenderer:o.default,edgeLabelRenderer:s.default,nodeProgramClasses:{circle:a.default},edgeProgramClasses:{arrow:d.default,line:h.default}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){if(t.label){var r=i.labelSize,n=i.labelFont,o=i.labelWeight,s=i.labelColor.attribute?t[i.labelColor.attribute]||i.labelColor.color||"#000":i.labelColor.color;e.fillStyle=s,e.font=o+" "+r+"px "+n,e.fillText(t.label,t.x+t.size+3,t.y+r/3)}}},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(16));t.default=function(e,t,i){var r=i.labelSize,o=i.labelFont,s=i.labelWeight;if(e.font=s+" "+r+"px "+o,e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var a=e.measureText(t.label).width,h=Math.round(a+5),d=Math.round(r+4),u=Math.max(t.size,r/2)+2,c=Math.asin(d/2/u),l=Math.sqrt(Math.abs(Math.pow(u,2)-Math.pow(d/2,2)));e.beginPath(),e.moveTo(t.x+l,t.y+d/2),e.lineTo(t.x+u+h,t.y+d/2),e.lineTo(t.x+u+h,t.y-d/2),e.lineTo(t.x+l,t.y-d/2),e.arc(t.x,t.y,u,c,-c),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,(0,n.default)(e,t,i)}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,r,n){var o=n.edgeLabelSize,s=n.edgeLabelFont,a=n.edgeLabelWeight,h=n.edgeLabelColor.attribute?t[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,d=t.label;if(d){e.fillStyle=h,e.font=a+" "+o+"px "+s;var u,c,l=i.size,p=r.size,f=i.x,g=i.y,m=r.x,y=r.y,b=m-f,v=y-g,_=Math.sqrt(b*b+v*v);if(!(_<l+p)){u=((f+=b*l/_)+(m-=b*p/_))/2,c=((g+=v*l/_)+(y-=v*p/_))/2,b=m-f,v=y-g,_=Math.sqrt(b*b+v*v);var w,x=e.measureText(d).width;if(x>_){for(d+="",x=e.measureText(d).width;x>_&&d.length>1;)d=d.slice(0,-2)+"",x=e.measureText(d).width;if(d.length<4)return}w=b>0?v>0?Math.acos(b/_):Math.asin(v/_):v>0?Math.acos(b/_)+Math.PI:Math.asin(b/_)+Math.PI/2,e.save(),e.translate(u,c),e.rotate(w),e.fillText(d,-x/2,t.size/2+o),e.restore()}}}},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(7),a=o(i(20)),h=o(i(21)),d=function(e){function t(t){var i=e.call(this,t,a.default,h.default,1,4)||this;return i.bind(),i}return n(t,e),t.prototype.process=function(e,t,i){var r=this.array,n=1*i*4;if(t)return r[n++]=0,r[n++]=0,r[n++]=0,void(r[n++]=0);var o=(0,s.floatColor)(e.color);r[n++]=e.x,r[n++]=e.y,r[n++]=e.size,r[n]=o},t.prototype.render=function(e){if(!this.hasNothingToRender()){var t=this.gl,i=this.program;t.useProgram(i),t.uniform1f(this.ratioLocation,1/Math.sqrt(e.ratio)),t.uniform1f(this.scaleLocation,e.scalingRatio),t.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),t.drawArrays(t.POINTS,0,this.array.length/4)}},t}(i(22).AbstractNodeProgram);t.default=d},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(color0, v_color, t);\n}\n"},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.createNodeCompoundProgram=t.AbstractNodeProgram=void 0;var o=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,r,n,o)||this;s.positionLocation=t.getAttribLocation(s.program,"a_position"),s.sizeLocation=t.getAttribLocation(s.program,"a_size"),s.colorLocation=t.getAttribLocation(s.program,"a_color");var a=t.getUniformLocation(s.program,"u_matrix");if(null===a)throw new Error("AbstractNodeProgram: error while getting matrixLocation");s.matrixLocation=a;var h=t.getUniformLocation(s.program,"u_ratio");if(null===h)throw new Error("AbstractNodeProgram: error while getting ratioLocation");s.ratioLocation=h;var d=t.getUniformLocation(s.program,"u_scale");if(null===d)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return s.scaleLocation=d,s}return n(t,e),t.prototype.bind=function(){var e=this.gl;e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.sizeLocation),e.enableVertexAttribArray(this.colorLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.sizeLocation,1,e.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},t}(i(23).AbstractProgram);t.AbstractNodeProgram=o,t.createNodeCompoundProgram=function(e){return function(){function t(t,i){this.programs=e.map((function(e){return new e(t,i)}))}return t.prototype.bufferData=function(){this.programs.forEach((function(e){return e.bufferData()}))},t.prototype.allocate=function(e){this.programs.forEach((function(t){return t.allocate(e)}))},t.prototype.bind=function(){},t.prototype.render=function(e){this.programs.forEach((function(t){return t.render(e)}))},t.prototype.process=function(e,t,i){this.programs.forEach((function(r){return r.process(e,t,i)}))},t}()}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractProgram=void 0;var r=i(24),n=function(){function e(e,t,i,n,o){this.array=new Float32Array,this.points=n,this.attributes=o,this.gl=e,this.vertexShaderSource=t,this.fragmentShaderSource=i;var s=e.createBuffer();if(null===s)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=s,e.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,r.loadVertexShader)(e,this.vertexShaderSource),this.fragmentShader=(0,r.loadFragmentShader)(e,this.fragmentShaderSource),this.program=(0,r.loadProgram)(e,[this.vertexShader,this.fragmentShader])}return e.prototype.bufferData=function(){var e=this.gl;e.bufferData(e.ARRAY_BUFFER,this.array,e.DYNAMIC_DRAW)},e.prototype.allocate=function(e){this.array=new Float32Array(this.points*this.attributes*e)},e.prototype.hasNothingToRender=function(){return 0===this.array.length},e}();t.AbstractProgram=n},(e,t)=>{"use strict";function i(e,t,i){var r="VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER,n=t.createShader(r);if(null===n)throw new Error("loadShader: error while creating the shader");if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error("loadShader: error while compiling the shader:\n"+o+"\n"+i)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.loadProgram=t.loadFragmentShader=t.loadVertexShader=void 0,t.loadVertexShader=function(e,t){return i("VERTEX",e,t)},t.loadFragmentShader=function(e,t){return i("FRAGMENT",e,t)},t.loadProgram=function(e,t){var i,r,n=e.createProgram();if(null===n)throw new Error("loadProgram: error while creating the program.");for(i=0,r=t.length;i<r;i++)e.attachShader(n,t[i]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(7),a=o(i(26)),h=o(i(27)),d=function(e){function t(t){var i=e.call(this,t,a.default,h.default,4,5)||this,r=t.createBuffer();if(null===r)throw new Error("EdgeProgram: error while creating indicesBuffer");i.indicesBuffer=r,i.positionLocation=t.getAttribLocation(i.program,"a_position"),i.colorLocation=t.getAttribLocation(i.program,"a_color"),i.normalLocation=t.getAttribLocation(i.program,"a_normal");var n=t.getUniformLocation(i.program,"u_matrix");if(null===n)throw new Error("EdgeProgram: error while getting matrixLocation");i.matrixLocation=n;var o=t.getUniformLocation(i.program,"u_correctionRatio");if(null===o)throw new Error("EdgeProgram: error while getting correctionRatioLocation");i.correctionRatioLocation=o;var d=t.getUniformLocation(i.program,"u_sqrtZoomRatio");if(null===d)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return i.sqrtZoomRatioLocation=d,i.canUse32BitsIndices=(0,s.canUse32BitsIndices)(t),i.IndicesArray=i.canUse32BitsIndices?Uint32Array:Uint16Array,i.indicesArray=new i.IndicesArray,i.indicesType=i.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,i.bind(),i}return n(t,e),t.prototype.bind=function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.normalLocation),e.enableVertexAttribArray(this.colorLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.normalLocation,2,e.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},t.prototype.computeIndices=function(){for(var e=this.array.length/5,t=e+e/2,i=new this.IndicesArray(t),r=0,n=0;r<e;r+=4)i[n++]=r,i[n++]=r+1,i[n++]=r+2,i[n++]=r+2,i[n++]=r+1,i[n++]=r+3;this.indicesArray=i},t.prototype.bufferData=function(){e.prototype.bufferData.call(this);var t=this.gl;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)},t.prototype.process=function(e,t,i,r,n){if(r)for(var o=20*n,a=o+20;o<a;o++)this.array[o]=0;else{var h=i.size||1,d=e.x,u=e.y,c=t.x,l=t.y,p=(0,s.floatColor)(i.color),f=c-d,g=l-u,m=f*f+g*g,y=0,b=0;m&&(y=-g*(m=1/Math.sqrt(m))*h,b=f*m*h);var v=20*n,_=this.array;_[v++]=d,_[v++]=u,_[v++]=y,_[v++]=b,_[v++]=p,_[v++]=d,_[v++]=u,_[v++]=-y,_[v++]=-b,_[v++]=p,_[v++]=c,_[v++]=l,_[v++]=y,_[v++]=b,_[v++]=p,_[v++]=c,_[v++]=l,_[v++]=-y,_[v++]=-b,_[v]=p}},t.prototype.render=function(e){if(!this.hasNothingToRender()){var t=this.gl,i=this.program;t.useProgram(i),t.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),t.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(e.ratio)),t.uniform1f(this.correctionRatioLocation,e.correctionRatio),t.drawElements(t.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},t}(i(28).AbstractEdgeProgram);t.default=d},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n'},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}"},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.createEdgeCompoundProgram=t.AbstractEdgeProgram=void 0;var o=function(e){function t(t,i,r,n,o){return e.call(this,t,i,r,n,o)||this}return n(t,e),t}(i(23).AbstractProgram);t.AbstractEdgeProgram=o,t.createEdgeCompoundProgram=function(e){return function(){function t(t,i){this.programs=e.map((function(e){return new e(t,i)}))}return t.prototype.bufferData=function(){this.programs.forEach((function(e){return e.bufferData()}))},t.prototype.allocate=function(e){this.programs.forEach((function(t){return t.allocate(e)}))},t.prototype.bind=function(){},t.prototype.computeIndices=function(){this.programs.forEach((function(e){return e.computeIndices()}))},t.prototype.render=function(e){this.programs.forEach((function(t){t.bind(),t.bufferData(),t.render(e)}))},t.prototype.process=function(e,t,i,r,n){this.programs.forEach((function(o){return o.process(e,t,i,r,n)}))},t}()}},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(28),o=r(i(30)),s=r(i(33)),a=(0,n.createEdgeCompoundProgram)([s.default,o.default]);t.default=a},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(7),a=o(i(31)),h=o(i(32)),d=function(e){function t(t){var i=e.call(this,t,a.default,h.default,3,9)||this;i.positionLocation=t.getAttribLocation(i.program,"a_position"),i.colorLocation=t.getAttribLocation(i.program,"a_color"),i.normalLocation=t.getAttribLocation(i.program,"a_normal"),i.radiusLocation=t.getAttribLocation(i.program,"a_radius"),i.barycentricLocation=t.getAttribLocation(i.program,"a_barycentric");var r=t.getUniformLocation(i.program,"u_matrix");if(null===r)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");i.matrixLocation=r;var n=t.getUniformLocation(i.program,"u_sqrtZoomRatio");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");i.sqrtZoomRatioLocation=n;var o=t.getUniformLocation(i.program,"u_correctionRatio");if(null===o)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return i.correctionRatioLocation=o,i.bind(),i}return n(t,e),t.prototype.bind=function(){var e=this.gl;e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.normalLocation),e.enableVertexAttribArray(this.radiusLocation),e.enableVertexAttribArray(this.colorLocation),e.enableVertexAttribArray(this.barycentricLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.normalLocation,2,e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.radiusLocation,1,e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(this.barycentricLocation,3,e.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},t.prototype.computeIndices=function(){},t.prototype.process=function(e,t,i,r,n){if(r)for(var o=27*n,a=o+27;o<a;o++)this.array[o]=0;else{var h=i.size||1,d=t.size||1,u=e.x,c=e.y,l=t.x,p=t.y,f=(0,s.floatColor)(i.color),g=l-u,m=p-c,y=g*g+m*m,b=0,v=0;y&&(b=-m*(y=1/Math.sqrt(y))*h,v=g*y*h);var _=27*n,w=this.array;w[_++]=l,w[_++]=p,w[_++]=-b,w[_++]=-v,w[_++]=d,w[_++]=f,w[_++]=1,w[_++]=0,w[_++]=0,w[_++]=l,w[_++]=p,w[_++]=-b,w[_++]=-v,w[_++]=d,w[_++]=f,w[_++]=0,w[_++]=1,w[_++]=0,w[_++]=l,w[_++]=p,w[_++]=-b,w[_++]=-v,w[_++]=d,w[_++]=f,w[_++]=0,w[_++]=0,w[_]=1}},t.prototype.render=function(e){if(!this.hasNothingToRender()){var t=this.gl,i=this.program;t.useProgram(i),t.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),t.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(e.ratio)),t.uniform1f(this.correctionRatioLocation,e.correctionRatio),t.drawArrays(t.TRIANGLES,0,this.array.length/9)}},t}(i(28).AbstractEdgeProgram);t.default=d},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n"},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(28),a=i(7),h=o(i(34)),d=o(i(27)),u=function(e){function t(t){var i=e.call(this,t,h.default,d.default,4,6)||this,r=t.createBuffer();if(null===r)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");i.indicesBuffer=r,i.positionLocation=t.getAttribLocation(i.program,"a_position"),i.colorLocation=t.getAttribLocation(i.program,"a_color"),i.normalLocation=t.getAttribLocation(i.program,"a_normal"),i.radiusLocation=t.getAttribLocation(i.program,"a_radius");var n=t.getUniformLocation(i.program,"u_matrix");if(null===n)throw new Error("EdgeClampedProgram: error while getting matrixLocation");i.matrixLocation=n;var o=t.getUniformLocation(i.program,"u_sqrtZoomRatio");if(null===o)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");i.sqrtZoomRatioLocation=o;var s=t.getUniformLocation(i.program,"u_correctionRatio");if(null===s)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return i.correctionRatioLocation=s,i.canUse32BitsIndices=(0,a.canUse32BitsIndices)(t),i.IndicesArray=i.canUse32BitsIndices?Uint32Array:Uint16Array,i.indicesArray=new i.IndicesArray,i.indicesType=i.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,i.bind(),i}return n(t,e),t.prototype.bind=function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.normalLocation),e.enableVertexAttribArray(this.colorLocation),e.enableVertexAttribArray(this.radiusLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.normalLocation,2,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(this.radiusLocation,1,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},t.prototype.process=function(e,t,i,r,n){if(r)for(var o=24*n,s=o+24;o<s;o++)this.array[o]=0;else{var h=i.size||1,d=e.x,u=e.y,c=t.x,l=t.y,p=t.size||1,f=(0,a.floatColor)(i.color),g=c-d,m=l-u,y=g*g+m*m,b=0,v=0;y&&(b=-m*(y=1/Math.sqrt(y))*h,v=g*y*h);var _=24*n,w=this.array;w[_++]=d,w[_++]=u,w[_++]=b,w[_++]=v,w[_++]=f,w[_++]=0,w[_++]=d,w[_++]=u,w[_++]=-b,w[_++]=-v,w[_++]=f,w[_++]=0,w[_++]=c,w[_++]=l,w[_++]=b,w[_++]=v,w[_++]=f,w[_++]=p,w[_++]=c,w[_++]=l,w[_++]=-b,w[_++]=-v,w[_++]=f,w[_]=-p}},t.prototype.computeIndices=function(){for(var e=this.array.length/6,t=e+e/2,i=new this.IndicesArray(t),r=0,n=0;r<e;r+=4)i[n++]=r,i[n++]=r+1,i[n++]=r+2,i[n++]=r+2,i[n++]=r+1,i[n++]=r+3;this.indicesArray=i},t.prototype.bufferData=function(){e.prototype.bufferData.call(this);var t=this.gl;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)},t.prototype.render=function(e){if(!this.hasNothingToRender()){var t=this.gl,i=this.program;t.useProgram(i),t.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),t.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(e.ratio)),t.uniform1f(this.correctionRatioLocation,e.correctionRatio),t.drawElements(t.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},t}(s.AbstractEdgeProgram);t.default=u},(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const r="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return s(t,e),t},h=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var d=a(i(11)),u=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.enabled=!0,r.isMoving=!1,r.touchMode=0,r.handleStart=r.handleStart.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleMove=r.handleMove.bind(r),t.addEventListener("touchstart",r.handleStart,!1),t.addEventListener("touchend",r.handleLeave,!1),t.addEventListener("touchcancel",r.handleLeave,!1),t.addEventListener("touchmove",r.handleMove,!1),r}return n(t,e),t.prototype.kill=function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)},t.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},t.prototype.dispatchRelatedMouseEvent=function(e,t,i,r){var n=i||(0,d.getPosition)(t.touches[0],this.container),o=new MouseEvent(e,{clientX:n.x,clientY:n.y,altKey:t.altKey,ctrlKey:t.ctrlKey});(r||this.container).dispatchEvent(o)},t.prototype.handleStart=function(e){var t=this;if(this.enabled){e.preventDefault(),1===e.touches.length&&this.dispatchRelatedMouseEvent("mousedown",e);var i=(0,d.getTouchesArray)(e.touches);if(this.isMoving=!0,this.touchMode=i.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=i.map((function(e){return(0,d.getPosition)(e,t.container)})),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var r=h(this.startTouchesPositions,2),n=r[0],o=n.x,s=n.y,a=r[1],u=a.x,c=a.y;this.startTouchesAngle=Math.atan2(c-s,u-o),this.startTouchesDistance=Math.sqrt(Math.pow(u-o,2)+Math.pow(c-s,2))}this.emit("touchdown",(0,d.getTouchCoords)(e,this.container))}},t.prototype.handleLeave=function(e){if(this.enabled){switch(e.preventDefault(),0===e.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",e,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===e.touches.length){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var t=this.renderer.getCamera(),i=t.getState(),r=t.getPreviousState()||{x:0,y:0};t.animate({x:i.x+3*(i.x-r.x),y:i.y+3*(i.y-r.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,d.getTouchCoords)(e,this.container))}},t.prototype.handleMove=function(e){var t,i=this;if(this.enabled){e.preventDefault(),1===e.touches.length&&this.dispatchRelatedMouseEvent("mousemove",e);var r=this.startCameraState,n=(0,d.getTouchesArray)(e.touches).map((function(e){return(0,d.getPosition)(e,i.container)}));switch(this.lastTouchesPositions=n,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){i.isMoving=!1}),200),this.touchMode){case 1:var o=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),s=o.x,a=o.y,u=this.renderer.viewportToFramedGraph(n[0]),c=u.x,l=u.y;this.renderer.getCamera().setState({x:r.x+s-c,y:r.y+a-l});break;case 2:var p={},f=n[0],g=f.x,m=f.y,y=n[1],b=y.x,v=y.y,_=Math.atan2(v-m,b-g)-this.startTouchesAngle,w=Math.hypot(v-m,b-g)/this.startTouchesDistance;p.ratio=r.ratio/w,p.angle=r.angle+_;var x=this.getDimensions(),E=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:r}),A=Math.min(x.width,x.height),L=A/x.width,k=A/x.height,S=p.ratio/A;l=m-A/2/k,c=(t=h([(c=g-A/2/L)*Math.cos(-p.angle)-l*Math.sin(-p.angle),l*Math.cos(-p.angle)+c*Math.sin(-p.angle)],2))[0],l=t[1],p.x=E.x-c*S,p.y=E.y+l*S,this.renderer.getCamera().setState(p)}this.emit("touchmove",(0,d.getTouchCoords)(e,this.container))}},t}(d.default);t.default=u},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doEdgeCollideWithPoint=t.isPixelColored=void 0,t.isPixelColored=function(e,t,i){var r=new Uint8Array(4);return e.readPixels(t,e.drawingBufferHeight-i,1,1,e.RGBA,e.UNSIGNED_BYTE,r),r[3]>0},t.doEdgeCollideWithPoint=function(e,t,i,r,n,o,s){return!(e<i-s&&e<n-s||t<r-s&&t<o-s||e>i+s&&e>n+s||t>r+s&&t>o+s||!(Math.abs((n-i)*(r-t)-(i-e)*(o-r))/Math.sqrt(Math.pow(n-i,2)+Math.pow(o-r,2))<s/2))}}],t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}return i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(0)})()},e.exports=t()}},t={},i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}(934),self.sigma=i},491:()=>{var e,t,i;e={186:e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},227:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.animateNodes=t.ANIMATE_DEFAULTS=void 0;var n=i(524),o=r(i(941));t.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},t.animateNodes=function(e,i,r,s){var a=Object.assign({},t.ANIMATE_DEFAULTS,r),h="function"==typeof a.easing?a.easing:o.default[a.easing],d=Date.now(),u={};for(var c in i){var l=i[c];for(var p in u[c]={},l)u[c][p]=e.getNodeAttribute(c,p)}var f=null,g=function(){var t=(Date.now()-d)/a.duration;if(t>=1){for(var r in i){var o=i[r];for(var c in o)e.setNodeAttribute(r,c,o[c])}"function"==typeof s&&s()}else{for(var r in t=h(t),i){o=i[r];var l=u[r];for(var c in o)e.setNodeAttribute(r,c,o[c]*t+l[c]*(1-t))}f=(0,n.requestFrame)(g)}};return g(),function(){f&&(0,n.cancelFrame)(f)}}},941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cubicInOut=t.cubicOut=t.cubicIn=t.quadraticInOut=t.quadraticOut=t.quadraticIn=t.linear=void 0,t.linear=function(e){return e},t.quadraticIn=function(e){return e*e},t.quadraticOut=function(e){return e*(2-e)},t.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.cubicIn=function(e){return e*e*e},t.cubicOut=function(e){return--e*e*e+1},t.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};var i={linear:t.linear,quadraticIn:t.quadraticIn,quadraticOut:t.quadraticOut,quadraticInOut:t.quadraticInOut,cubicIn:t.cubicIn,cubicOut:t.cubicOut,cubicInOut:t.cubicInOut};t.default=i},524:function(e,t,i){"use strict";var r=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateGraph=t.canUse32BitsIndices=t.extractPixel=t.getMatrixImpact=t.matrixFromCamera=t.getCorrectionRatio=t.floatColor=t.zIndexOrdering=t.createNormalizationFunction=t.getPixelRatio=t.createElement=t.cancelFrame=t.requestFrame=t.assignDeep=t.assign=t.isPlainObject=void 0;var o=n(i(186)),s=i(132);function a(e){return"object"==typeof e&&null!==e&&e.constructor===Object}t.isPlainObject=a,t.assign=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];e=e||{};for(var r=0,n=t.length;r<n;r++){var o=t[r];o&&Object.assign(e,o)}return e},t.assignDeep=function e(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];t=t||{};for(var n=0,o=i.length;n<o;n++){var s=i[n];if(s)for(var h in s)a(s[h])?t[h]=e(t[h],s[h]):t[h]=s[h]}return t},t.requestFrame="undefined"!=typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,0)},t.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:function(e){return clearTimeout(e)},t.createElement=function(e,t,i){var r=document.createElement(e);if(t)for(var n in t)r.style[n]=t[n];if(i)for(var n in i)r.setAttribute(n,i[n]);return r},t.getPixelRatio=function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},t.createNormalizationFunction=function(e){var t=r(e.x,2),i=t[0],n=t[1],o=r(e.y,2),s=o[0],a=o[1],h=Math.max(n-i,a-s);0===h&&(h=1);var d=(n+i)/2,u=(a+s)/2,c=function(e){return{x:.5+(e.x-d)/h,y:.5+(e.y-u)/h}};return c.applyTo=function(e){e.x=.5+(e.x-d)/h,e.y=.5+(e.y-u)/h},c.inverse=function(e){return{x:d+h*(e.x-.5),y:u+h*(e.y-.5)}},c.ratio=h,c},t.zIndexOrdering=function(e,t,i){return i.sort((function(e,i){var r=t(e)||0,n=t(i)||0;return r<n?-1:r>n?1:0}))};var h={},d=new Int8Array(4),u=new Int32Array(d.buffer,0,1),c=new Float32Array(d.buffer,0,1),l=/^\s*rgba?\s*\(/,p=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function f(e,t){var i=e.height/e.width,r=t.height/t.width;return i<1&&r>1||i>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/i,i))}t.floatColor=function(e){if(void 0!==h[e])return h[e];var t=0,i=0,r=0,n=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),i=parseInt(e.charAt(2)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),i=parseInt(e.charAt(3)+e.charAt(4),16),r=parseInt(e.charAt(5)+e.charAt(6),16));else if(l.test(e)){var o=e.match(p);o&&(t=+o[1],i=+o[2],r=+o[3],o[4]&&(n=+o[4]))}n=255*n|0,u[0]=4278190079&(n<<24|r<<16|i<<8|t);var s=c[0];return h[e]=s,s},t.getCorrectionRatio=f,t.matrixFromCamera=function(e,t,i,r,n){var o=e.angle,a=e.ratio,h=e.x,d=e.y,u=t.width,c=t.height,l=(0,s.identity)(),p=Math.min(u,c)-2*r,g=f(t,i);return n?((0,s.multiply)(l,(0,s.translate)((0,s.identity)(),h,d)),(0,s.multiply)(l,(0,s.scale)((0,s.identity)(),a)),(0,s.multiply)(l,(0,s.rotate)((0,s.identity)(),o)),(0,s.multiply)(l,(0,s.scale)((0,s.identity)(),u/p/2/g,c/p/2/g))):((0,s.multiply)(l,(0,s.scale)((0,s.identity)(),p/u*2*g,p/c*2*g)),(0,s.multiply)(l,(0,s.rotate)((0,s.identity)(),-o)),(0,s.multiply)(l,(0,s.scale)((0,s.identity)(),1/a)),(0,s.multiply)(l,(0,s.translate)((0,s.identity)(),-h,-d))),l},t.getMatrixImpact=function(e,t,i){var n=r((0,s.multiplyVec)(e,[Math.cos(t.angle),Math.sin(t.angle),0]),2),o=n[0],a=n[1];return 1/Math.sqrt(Math.pow(o,2)+Math.pow(a,2))/i.width},t.extractPixel=function(e,t,i,r){var n=r||new Uint8Array(4);return e.readPixels(t,i,1,1,e.RGBA,e.UNSIGNED_BYTE,n),n},t.canUse32BitsIndices=function(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||!!e.getExtension("OES_element_index_uint")},t.validateGraph=function(e){if(!(0,o.default)(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode((function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node "+e+" are invalid. A node must have a numeric 'x' and 'y' attribute.")}))}},132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiplyVec=t.multiply=t.translate=t.rotate=t.scale=t.identity=void 0,t.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},t.scale=function(e,t,i){return e[0]=t,e[4]="number"==typeof i?i:t,e},t.rotate=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[3]=-i,e[4]=r,e},t.translate=function(e,t,i){return e[6]=t,e[7]=i,e},t.multiply=function(e,t){var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],d=e[7],u=e[8],c=t[0],l=t[1],p=t[2],f=t[3],g=t[4],m=t[5],y=t[6],b=t[7],v=t[8];return e[0]=c*i+l*o+p*h,e[1]=c*r+l*s+p*d,e[2]=c*n+l*a+p*u,e[3]=f*i+g*o+m*h,e[4]=f*r+g*s+m*d,e[5]=f*n+g*a+m*u,e[6]=y*i+b*o+v*h,e[7]=y*r+b*s+v*d,e[8]=y*n+b*a+v*u,e},t.multiplyVec=function(e,t){var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],d=e[7],u=e[8],c=t[0],l=t[1],p=t[2],f=Array.isArray(t)?[0,0,0]:Float32Array.of(0,0,0);return f[0]=c*i+l*o+p*h,f[1]=c*r+l*s+p*d,f[2]=c*n+l*a+p*u,f}}},t={},i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}(227),self.Animate=i}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}(()=>{"use strict";function e(e){if(0==e.length)return null;var t={};for(let i of e)null==t[i]?t[i]=1:t[i]++;return Object.keys(t).reduce(((e,i)=>t[e]>t[i]?e:i))}i(778),i(686);class t{constructor(e){this.state=e,this.graph=e.graph,this.sigma=e.sigma,this.settings=e.settings,this.last_time=null}log(e,t=!1){let i=window.performance.now();if(t&&this.last_time){let t=i-this.last_time;console.log(`${e} (${t}ms)`)}else console.log(e);this.last_time=i}is_node_hidden(e){return this.sigma.nodeDataCache[e].hidden}is_node_obscured(e){return this.sigma.nodeDataCache[e].obscured}is_node_unfocused(e){return this.sigma.nodeDataCache[e].unfocused}is_edge_hidden(e){let t=this.graph.extremities(e);return!!(this.sigma.edgeDataCache[e].hidden||this.is_node_hidden(t[0])&&this.is_node_hidden(t[1]))||this.sigma.edgeDataCache[e].hidden}is_edge_obscured(e){return this.sigma.edgeDataCache[e].obscured}is_edge_unfocused(e){return this.sigma.edgeDataCache[e].unfocused}is_node_fixed(e){return this.sigma.nodeDataCache[e].fixed}is_tree_node(e){return this.graph.getNodeAttribute(e,"tree")}is_tree_edge(e){return this.graph.getEdgeAttribute(e,"tree")}is_hidden(e){return e.hidden}is_obscured(e){return e.obscured}is_unfocused(e){return e.unfocused}is_highlighted(e){return e.highlighted}if_fixed(e){return e.fixed}is_out_of_range(e){return e.out_of_range}is_out_of_tree(e){return e.out_of_tree}hide(e){e.hidden=!0}obscure(e){e.obscured=!0,e.label=void 0,e.zIndex=-1,e.color="#f9f9f9"}unfocus(e){e.unfocused||(e.color=e.color?function(e,t){var{red:i,green:r,blue:n}=function(e){var t={};return t.red=parseInt(e.substr(1,2),16),t.green=parseInt(e.substr(3,2),16),t.blue=parseInt(e.substr(5,2),16),t}(e);return function(e,t,i){var r="#";return r+=parseInt(e).toString(16),(r+=parseInt(t).toString(16))+parseInt(i).toString(16)}(i+=(255-i)*t,r+=(255-r)*t,n+=(255-n)*t)}(e.color,.9):e.color),e.unfocused=!0,e.zIndex=-1}highlight(e){e.highlighted=!0}fix(e){e.fixed=!0}out_of_range(e){e.out_of_range=!0}out_of_tree(e){e.out_of_tree=!0}node_reducer(e,t){return t}edge_reducer(e,t){return t}init(){}init_graph(){}}i(283),i(922);const r={attraction:.02,repulsion:150,drag:2,drag_threshold:.01,gravity:.01,max_speed:100};class n extends t{constructor(e){super(e),this.settings=Object.assign(r,this.settings),this.node_states={},this.running=!1,this.scale=function(e){return Math.pow(8,e)},this.FA_worker,this.FA_frame_iterations=1,this.FA_snap_iterations=50,this.FA_optimize_threshold=500,this.FA_settings={adjustSizes:!1,barnesHutOptimize:!1,barnesHutTheta:.5,edgeWeightInfluence:0,gravity:1,strongGravityMode:!0,linLogMode:!1,outboundAttractionDistribution:!1,scalingRatio:1,slowDown:10},this.fps=30,this.startTime,this.now,this.then,this.elapsed,this.frameCount=0,this.$toggle_button=$("button#physics"),this.$start_label=$("button#physics span img.start-label"),this.$stop_label=$("button#physics span img.stop-label"),this.$organize_button=$("button#organize"),this.x_key="x",this.y_key="y",this.init()}iterate_FA2(e){for(let t of this.state.tree.get_open_branches())this.simulate_cluster(t,e)}simulate_cluster(e,t){let i=this.state.tree.get_cluster_info(e);i.global_to_local(),this.simulate(i.graph,t,!0),i.local_to_global()}simulate(e,t,i=!1){let r=this.FA_settings;if(r.barnesHutOptimize=e.order>this.FA_optimize_threshold,!i)return FA2(e,{iterations:t,settings:r});FA2.assign(e,{iterations:t,settings:r})}get_global_node_positions(){for(let e of this.state.tree.get_open_branches())this.state.tree.get_cluster_info(e).global_to_local()}snap(){this.iterate_FA2(this.FA_snap_iterations)}animate(e){this.now=window.performance.now(),this.startTime=this.now,this.then=this.now,this.frameCount=0,void 0===e&&(e=1/0),this._animate(this.now,e)}_animate(e,t){this.now=e;let i=this.now-this.then;this.now-this.startTime<t&&(this.frameID=window.requestAnimationFrame((e=>this._animate(e,t)))),i>1e3/this.fps&&(this.then=this.now-i%1e3/this.fps,this.iterate_FA2(this.FA_frame_iterations))}init(){this.$toggle_button.on("click",(()=>{this.running?this.stop():void 0!==this.graph?this.start():console.log("Can't start physics engine - no graph loaded")})),this.$organize_button.on("click",(()=>{this.snap()}))}init_graph(){this.state.simulation=this,this.FA_worker=new FA2Layout(this.graph,{settings:this.FA_settings})}start(){this.running||(this.get_global_node_positions(),this.$start_label.toggle(),this.$stop_label.toggle(),this.animate(),this.running=!0)}stop(){this.running&&("number"==typeof this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=void 0,this.$start_label.toggle(),this.$stop_label.toggle()),this.running=!1)}start_worker(){this.FA_worker.start(),this.running=!0,this.$start_label.toggle(),this.$stop_label.toggle()}stop_worker(){this.FA_worker.stop(),this.running=!1,this.$start_label.toggle(),this.$stop_label.toggle()}}i(37);const o="node",s="Node1, Node 2,",a="edge";class h extends t{constructor(e){super(e),this.search_type,this.searched_nodes=new Set,this.suggested_nodes=new Set,this.searched_edges=new Set,this.suggested_edges=new Set,this.node_query=!1,this.edge_query=!1,this.hovered_node=null,this.selected_nodes=[],this.selected_edges=new Set,this.selected_neighbors=new Set,this.intermediate_nodes=new Set,this.dragged_node=null,this.is_dragging=!1,this.settings.animated_zoom_duration=300,this.settings.animated_zoom_ratio=2,this.settings.animated_zoom_fps=30,this.settings.instant_zoom_ratio=1.2,this.zoom_animation_id=null,this.home_bbox,this.$search_input=$("#search-input"),this.$search_type_button=$("#search-type"),this.$home_button=$("div.interface button#home"),this.$error=$("div#error"),this.state.interaction=this,this.init()}search_nodes(){let e=this.$search_input.val().toLowerCase();if(!e)return this.searched_nodes.clear(),this.suggested_nodes.clear(),void(this.node_query=!1);this.node_query=!0;let t=[],i=[],r=e.split(",");for(let e=0;e<r.length;e++){let s=r[e];var n=this.graph.nodes().map((e=>({key:e,label:this.graph.getNodeAttribute(e,"label")}))).filter((e=>(e.label||"").toLowerCase().includes(s))),o=n.filter((e=>e.label.toLowerCase()==s));1==n.length?(t.push(n[0].key),i.push(n[0].key),e==r.length-1&&this.centerNode(n[0].key)):e==r.length-1?i=i.concat(n.map((e=>e.key))):(t=t.concat(o.map((e=>e.key))),i=i.concat(o.map((e=>e.key))))}2==t.length&&2==i.length?this.get_shortest_path(t[0],t[1]):this.clear_shortest_path(),this.searched_nodes=new Set(t),this.suggested_nodes=new Set(i),this.sigma.refresh()}search_edges(){let e=this.$search_input.val().toLowerCase();if(!e)return this.searched_edges.clear(),this.suggested_edges.clear(),void(this.edge_query=!1);this.edge_query=!0;let t=[],i=[],r=e.split(",");for(let e=0;e<r.length;e++){let o=r[e];var n=this.graph.edges().map((e=>({key:e,label:this.graph.getEdgeAttribute(e,"label")}))).filter((e=>(e.label||"").toLowerCase().includes(o)));i=i.concat(n.map((e=>e.key))),1==n.length&&(t.push(n[0].key),r.length)}this.searched_edges=new Set(t),this.suggested_edges=new Set(i),this.sigma.refresh()}search_clear(){this.$search_input.val(""),this.searched_nodes.clear(),this.suggested_nodes.clear(),this.node_query=!1,this.searched_edges.clear(),this.suggested_edges.clear(),this.edge_query=!1,this.sigma.refresh()}get_shortest_path(e,t){let i=shortestPath(this.graph,e,t);if(null!=i){this.intermediate_nodes=new Set(i);let e=[];for(let t=1;t<i.length;t++){let r=this.graph.edges(i[t-1],i[t]);e.push(r[0])}return this.selected_edges=new Set(e),!0}return this.clear_shortest_path(),!1}clear_shortest_path(){this.selected_edges.clear(),this.intermediate_nodes.clear()}reset_camera(){this.sigma.getCamera().animatedReset(),this.animate_bbox(this.sigma.getCustomBBox(),this.home_bbox,100)}hoverNode(e){this.hovered_node=e||void 0,this.sigma.refresh()}selectNode(e){if(e)if(this.selected_nodes.unshift(e),this.selected_nodes=this.selected_nodes.slice(0,2),this.selected_neighbors=new Set(this.graph.neighbors(e)),2==this.selected_nodes.length){let[e,t]=this.selected_nodes;this.selected_edges=new Set(this.graph.edges(e,t).filter((e=>!this.is_edge_hidden(e))));let i={x:this.sigma.nodeDataCache[e].x,y:this.sigma.nodeDataCache[e].y},r={x:this.sigma.nodeDataCache[t].x,y:this.sigma.nodeDataCache[t].y},n={x:(i.x+r.x)/2,y:(i.y+r.y)/2},{x:o,y:s}=this.sigma.framedGraphToViewport(n);0!=this.selected_edges.size?this.show_menu(a,this.selected_edges.values(),o,s):this.get_shortest_path(this.selected_nodes[0],this.selected_nodes[1])||(this.selected_nodes=this.selected_nodes.slice(0,1))}else this.clear_shortest_path();else this.selected_nodes=[],this.selected_neighbors.clear(),this.clear_shortest_path();this.sigma.refresh()}dragNode(e){e?(this.dragged_node=e,this.is_dragging=!0,this.sigma.getCamera().disable()):(this.dragged_node=null,this.is_dragging=!1,this.sigma.getCamera().enable()),this.sigma.refresh()}centerNode(e){var t=this.sigma.getNodeDisplayData(e);this.sigma.getCamera().animate(t,{duration:500})}is_interactive(e){return!this.is_node_hidden(e)&&!this.is_node_obscured(e)}show_menu(e,t,i,r){if(e===a)var n=this.sigma.edgeDataCache,o=e=>this.graph.getEdgeAttributes(e),s=e=>{let t=o(e).label;if(void 0===t){let i=this.graph.extremities(e);t=this.graph.getNodeAttribute(i[0],"label")+"<->"+this.graph.getNodeAttribute(i[1],"label")}return t};else n=this.sigma.nodeDataCache,o=e=>this.graph.getNodeAttributes(e),s=e=>{let t=o(e).label;return void 0===t&&(t=e),t};let h=$("<div id='data-menu'></div>"),d=$("<div id='tab-buttons'></div>").appendTo(h);"string"==typeof t&&(t=[t]);let u=null;for(let e of t){let t=null,i="key-"+e.replace(/\s/g,"__");t=this.settings.advanced_data?n[e]:o(e).data;let r=s(e),a=$(`<div class='tab ${i}'></div>`).appendTo(h),c=$(`<button class='button ${i}'>${r}</button>`).appendTo(d);c.on("click",(e=>this.select_menu_tab(e,i))),null===u&&(u=c),this.generate_data_menu_html(a,t)}h.appendTo("body").css({left:i+"px",top:r+"px"}),u.trigger("click")}select_menu_tab(e,t){let i=CSS.escape(t),r=$("div#data-menu div.tab");for(let e of r)$(e).hide();$(`div#data-menu div.tab.${i}`).show();let n=$("div#data-menu div#tab-buttons button");for(let e of n)$(e).removeClass("active");$(`div#data-menu div#tab-buttons button.${i}`).addClass("active")}generate_data_menu_html(e,t){let i=$("<div class='menu-section'></div>"),r={};if(void 0!==t&&Object.keys(t).length>0){for(let[e,n]of Object.entries(t))"object"==typeof n&&null!==n?r[e]=n:$(`<div><span>${e}:</span><span>${n}</span></div>`).appendTo(i);for(let[e,t]of Object.entries(r))$(`<div><span>${e}:</span></div>`).appendTo(i),this.generate_data_menu_html(i,t)}else $("<div><span>No data</span></div>").appendTo(i).css({"font-style":"italic",color:"grey"});i.appendTo(e)}clear_data_menus(){$("div#data-menu").remove()}zoom(e,t,i){let r=this.sigma.getCamera(),n=e>0?1/this.settings.animated_zoom_ratio:this.settings.animated_zoom_ratio,o=r.getState().ratio*n;r.animate(this.sigma.getViewportZoomedState({x:t,y:i},o),{easing:"quadraticOut",duration:this.settings.animated_zoom_duration},(()=>{this.currentWheelDirection=0}))}zoomBBox(e,t,i){let r=this.settings.animate_zoom?this.settings.animated_zoom_ratio:this.settings.instant_zoom_ratio,{x:n,y:o}=this.sigma.viewportToGraph({x:t,y:i}),s=e>0?1/r:r,a=this.sigma.getCustomBBox()||this.sigma.getBBox();var h=(a.x[1]+a.x[0])/2,d=(a.y[1]+a.y[0])/2;h+=(n-h)*(1-s),d+=(o-d)*(1-s);let u=s*(a.x[1]-a.x[0]),c=s*(a.y[1]-a.y[0]),l={x:[h-u/2,h+u/2],y:[d-c/2,d+c/2]};this.settings.animate_zoom?this.animate_bbox(a,l,this.settings.animated_zoom_duration):(this.sigma.setCustomBBox(l),this.sigma.refresh())}bbox_easing(e){return e*(2-e)}animate_bbox(e,t,i){let r=window.performance.now();this.startTime=r,this.then=r,this._animate_bbox(e,t,r,i)}_animate_bbox(e,t,i,r){let n=i,o=n-this.then,s=n-this.startTime;if(this.zoom_animation_id=s<r?window.requestAnimationFrame((i=>this._animate_bbox(e,t,i,r))):null,o>1e3/this.settings.animated_zoom_fps){this.then=n-o%1e3/this.settings.animated_zoom_fps;let i=(n-this.startTime)/r,s={},a=this.bbox_easing(i);s.x=[e.x[0]+(t.x[0]-e.x[0])*a,e.x[1]+(t.x[1]-e.x[1])*a],s.y=[e.y[0]+(t.y[0]-e.y[0])*a,e.y[1]+(t.y[1]-e.y[1])*a],this.sigma.setCustomBBox(s),this.sigma.refresh()}}error(e,t){this.$error.show(),this.$error.find("p#name").html("Error: "+e),this.$error.find("p#message").html(t)}node_reducer(e,t){return(this.selected_nodes.includes(e)||this.searched_nodes.has(e))&&this.highlight(t),0==this.selected_neighbors.size||this.selected_neighbors.has(e)||this.selected_nodes.includes(e)||this.intermediate_nodes.has(e)||this.unfocus(t),0!=this.selected_edges.size&&(this.graph.edges(e).some((e=>this.selected_edges.has(e)))||this.unfocus(t)),!this.node_query||this.suggested_nodes.has(e)||this.searched_nodes.has(e)||this.unfocus(t),this.edge_query&&(this.graph.edges(e).some((e=>this.suggested_edges.has(e)))||this.unfocus(t)),this.dragged_node&&this.dragged_node==e&&this.fix(t),this.settings.show_unfocused_nodes||!this.is_unfocused(t)||this.intermediate_nodes.has(e)||this.hide(t),t}edge_reducer(e,t){if(0==this.selected_edges.size||this.selected_edges.has(e)||this.unfocus(t),0!=this.selected_nodes.length){let[i,r]=this.selected_nodes;!i||this.selected_edges.has(e)||this.graph.hasExtremity(e,i)||this.graph.hasExtremity(e,r)||this.hide(t)}return this.node_query&&(this.searched_edges.has(e)||this.selected_edges.has(e)||this.suggested_nodes.has(this.graph.source(e))&&this.suggested_nodes.has(this.graph.target(e))||this.hide(t)),this.edge_query&&(this.suggested_edges.has(e)||this.hide(t)),t}init(){$(document).contextmenu((function(){return!1})),this.$search_input.on("input",(()=>{this.selectNode(),this.search_type===o?this.search_nodes():this.search_edges()})),this.$search_input.blur((()=>{})),this.search_type=o,this.$search_type_button.html("Nodes"),this.$search_input.prop("placeholder",s),this.$search_type_button.on("click",(()=>{this.search_clear(),this.search_type===o?(this.$search_type_button.html("Edges"),this.$search_input.prop("placeholder","Edge1, Edge 2"),this.search_type=a):(this.$search_input.prop("placeholder",s),this.$search_type_button.html("Nodes"),this.search_type=o)})),this.$home_button.on("click",(()=>this.reset_camera())),this.sigma.on("downNode",(e=>{this.is_interactive(e.node)&&this.dragNode(e.node)})),this.sigma.on("clickNode",(e=>{this.is_interactive(e.node)&&this.selectNode(e.node)})),this.sigma.on("clickStage",(e=>{this.selectNode(),this.search_clear()})),this.sigma.on("rightClickNode",(e=>{this.is_node_hidden(e.node)||this.show_menu(o,e.node,e.event.x,e.event.y)})),this.sigma.on("clickEdge",(e=>{})),this.sigma.on("rightClickEdge",(e=>{this.is_edge_hidden(e.edge)||this.show_menu(a,e.edge,e.event.x,e.event.y)})),this.sigma.getMouseCaptor().on("mousedown",(()=>{this.clear_data_menus()})),this.sigma.getMouseCaptor().on("mouseup",(()=>{this.dragNode()})),this.sigma.getMouseCaptor().on("mousemove",(e=>{if(!this.is_dragging||!this.dragged_node)return;const t=this.sigma.viewportToGraph(e);this.graph.setNodeAttribute(this.dragged_node,"x",t.x),this.graph.setNodeAttribute(this.dragged_node,"y",t.y)})),this.sigma.getMouseCaptor().on("doubleClick",(e=>{e.preventSigmaDefault()})),this.sigma.on("doubleClickNode",(e=>{this.state.tree.open_node(e.node),this.selectNode()})),this.sigma.getMouseCaptor().on("wheel",(e=>{e.preventSigmaDefault();var t=e.deltaY>0?1:-1;if(window.event.ctrlKey){const i=Date.now();if(this.lastWheelTriggerTime&&i-this.lastWheelTriggerTime<this.settings.animated_zoom_duration)return;this.currentWheelDirection=t,this.lastWheelTriggerTime=i,this.zoom(t,e.clientX,e.clientY)}else null===this.zoom_animation_id&&this.zoomBBox(t,e.clientX,e.clientY)})),$("body").on("keypress",(e=>{let t=this.selected_nodes[0];if(43==e.keyCode){if(!t)return;this.state.tree.open_node(t)}else if(45==e.keyCode||61==e.keyCode){if(!t)return;this.state.tree.close_node(t)}}))}init_graph(){}}i(491);const d="cat",u="cont",c="slider",l="node",p="edge",f=500;class g extends t{constructor(e){super(e),this.data={[l]:{},[p]:{}},this.sliders={},this.init()}init(){}init_graph(){this.validate_graph(),this.state.tree=new m(this.state,this)}validate_graph(){this.graph.forEachNode(((e,t)=>{if(t.data)for(let[e,i]of Object.entries(t.data)){let t=this.data.node;"number"!=typeof i?t[e]=d:void 0===this.data.node[e]&&(t[e]=u)}})),this.graph.forEachEdge(((e,t)=>{if(t.data)for(let[e,i]of Object.entries(t.data)){let t=this.data.edge;"number"!=typeof i?t[e]=d:void 0===t[e]&&(t[e]=u)}})),this.graph.updateEachNodeAttributes(((e,t)=>{var i=t.data||{};return Object.keys(this.data.node).forEach((e=>{i.hasOwnProperty(e)||(i[e]=null)})),t.data=i,t})),this.graph.updateEachEdgeAttributes(((e,t)=>{var i=t.data||{};return Object.keys(this.data.edge).forEach((e=>{i.hasOwnProperty(e)||(i[e]=null)})),t.data=i,t})),this.add_default_data()}add_default_data(){this.data.node.degree=u,this.graph.forEachNode(((e,t)=>{this.set_node_data(e,"degree",this.graph.degree(e))})),this.graph.forEachNode(((e,t)=>{this.graph.setNodeAttribute(e,"depth",0)})),this.graph.forEachNode(((e,t)=>{this.graph.setNodeAttribute(e,"sliders",{})})),this.graph.forEachEdge(((e,t)=>{this.graph.setEdgeAttribute(e,"sliders",{})})),this.graph.updateEachNodeAttributes(((e,t)=>(t.x=void 0!==t.x?t.x:100*(Math.random()-.5),t.y=void 0!==t.y?t.y:100*(Math.random()-.5),t.size=void 0!==t.size?t.size:10,t.color=void 0!==t.color?t.color:"#C0C0C0",t))),this.graph.forEachEdge(((e,t)=>{t.color=void 0!==t.color?t.color:"#C0C0C0"}))}get_data(e,t=null){return null===t?e.data:e.data[t]}set_node_data(e,t,i){let r=this.graph.getNodeAttribute(e,"data");r[t]=i,this.graph.setNodeAttribute(e,"data",r)}set_edge_data(e,t,i){let r=this.graph.getEdgeAttribute(e,"data");r[t]=i,this.graph.setNodeAttribute(e,"data",r)}get_slider(e,t=null){return null===t?e.sliders:e.sliders[t]}set_node_slider(e,t,i){let r=this.graph.getNodeAttribute(e,"sliders");null!=r?r[t]=i:r={[t]:i},this.graph.setNodeAttribute(e,"sliders",r)}set_edge_slider(e,t,i){let r=this.graph.getEdgeAttribute(e,"sliders");r[t]=i,this.graph.setEdgeAttribute(e,"sliders",r)}get_data_type(e,t){if(e!==l&&e!==p)throw Error(`Specify node or edge for the data to retrieve. Got "${e}"`);return void 0===this.data[e][t]?(console.error(`No ${e==l?"nodes":"edges"} have the data key "${t}"`),!1):this.data[e][t]}data_statistics(e,t,i=[]){0==i.length&&(i=e==l?this.graph.nodes():this.graph.edges());let r=e==l?e=>this.graph.getNodeAttributes(e):e=>this.graph.getEdgeAttributes(e),n={};if(this.data[e][t]===u)for(let e of i){let i=r(e),o=this.get_data(i,t);null!=o&&((void 0===n.min||o<n.min)&&(n.min=o),(void 0===n.max||o>n.max)&&(n.max=o))}else{n.frequency={};for(let e of i){let i=r(e),o=this.get_data(i,t);null!=o&&(n.frequency[o]=void 0===n.frequency[o]?1:n.frequency[o]+1)}n.categories=Array.from(Object.keys(n.frequency)).sort()}return n}node_reducer(e,t){this.is_out_of_tree(t)&&this.hide(t);for(let[i,r]of Object.entries(this.sliders))r.node&&(this.is_tree_node(e)?(null==this.get_slider(t,i)||this.get_slider(t,i).max<r.min||this.get_slider(t,i).min>r.max)&&this.out_of_range(t):(null==this.get_slider(t,i)||this.get_slider(t,i)<r.min||this.get_slider(t,i)>r.max)&&this.out_of_range(t));return null!=t.color&&null!=t.size||this.out_of_range(t),t}edge_reducer(e,t){for(let[i,r]of Object.entries(this.sliders))r.edge&&(this.is_tree_edge(e)?(null==this.get_slider(t,i)||this.get_slider(t,i).max<r.min||this.get_slider(t,i).min>r.max)&&this.hide(t):(null==this.get_slider(t,i)||this.get_slider(t,i)<r.min||this.get_slider(t,i)>r.max)&&this.hide(t));let i=this.graph.extremities(e);return(this.is_node_obscured(i[0])||this.is_node_obscured(i[1]))&&this.hide(t),t}linear_map(e,t,i,r,n){if(null!=e)return t==i?(n+r)/2:(n-r)/(i-t)*(e-t)+r}map_dimension(e,t,i,r,n){let o=this.get_data_type(e,t),s=null;s=this.data_statistics(e,t);let a=e==l?e=>this.graph.updateEachNodeAttributes(e):e=>this.graph.updateEachEdgeAttributes(e);o==u&&r==u&&this.continuous_to_continuous(a,t,i,s,n),o==u&&r==d&&console.error("Continuous to Categorical mapping not yet implemented"),o!=d||r!=d&&r!=u||this.categorical_to_categorical(a,t,i,n),r===c&&this.to_slider(e,o,t,i,s,n)}continuous_to_continuous(e,t,i,r,n){void 0!==n.min&&void 0!==n.max||console.log(`Map must specify map.min and map.max, the min/max values of the target dimension "${i}".`),e(((e,o)=>{let s=this.get_data(o,t);return o[i]=this.linear_map(s,r.min,r.max,n.min,n.max),o}))}continuous_to_categorical(e,t,i,r){e(((e,r)=>(this.get_data(r,t),r[i],r)))}categorical_to_categorical(e,t,i,r){e(((e,n)=>{let o=this.get_data(n,t);return n[i]=r[o],n}))}to_slider(e,t,i,r,n,o){let s=e==l?e=>this.graph.forEachNode(e):e=>this.graph.forEachEdge(e),a=e==l?(...e)=>this.set_node_slider(...e):(...e)=>this.set_edge_slider(...e);t==u&&this.continuous_to_slider(s,a,i,r,n),t==d&&this.categorical_to_slider(s,a,i,r,n)}continuous_to_slider(e,t,i,r,n){e(((e,n)=>{let o=this.get_data(n,i);t(e,r,o)}));let o=this.sliders[r],s=n.min,a=n.max;void 0===o.abs_min?(o.abs_min=s,o.abs_max=a):(o.abs_min=o.abs_min<s?o.abs_min:s,o.abs_max=o.abs_max>a?o.abs_max:a),this.add_continuous_slider(r,o.abs_min,o.abs_max)}categorical_to_slider(e,t,i,r,n){let o={};for(var s=0;s<n.categories.length;s++)o[n.categories[s]]=s;e(((e,n)=>{let s=this.get_data(n,i),a=o[s];t(e,r,a)}));let a=new Map(Object.entries(o).map((e=>e.reverse())));this.add_categorical_slider(r,a)}add_continuous_slider(e,t,i){let r=this.create_slider_html(e);if(i-t>0)var n=(o=i-t)>=100?0:Math.ceil(1-Math.log10(o));else n=0;var o;let s=Math.pow(.1,n);t-=s,i+=s,noUiSlider.create(r,{start:[t,i],range:{min:t,max:i},tooltips:!0,connect:[!1,!0,!1],behaviour:"drag",format:{to:e=>e.toFixed(n).toString(),from:e=>parseFloat(e)},pips:{mode:"count",values:5,density:5,format:{to:e=>e.toFixed(n).toString()}}}),r.noUiSlider.on("update",((t,i)=>{this.slider_event(e,t[0],t[1])}))}add_categorical_slider(e,t){let i=this.create_slider_html(e),r=Array.from(t.keys()),n=Math.min(...r),o=Math.max(...r),s={};for(let e=0;e<r.length;e++){let t;t=0==e?"min":e==r.length-1?"max":100*r[e]/o+"%",s[t]=r[e]}noUiSlider.create(i,{start:[n],range:s,tooltips:!1,snap:!0,pips:{mode:"range",density:100,format:{to:e=>t.get(e)}}}),i.noUiSlider.on("update",((t,i)=>{this.slider_event(e,t[0],t[0])}))}create_slider_html(e){let t=e.replaceAll(" ",""),i=$(`div.slider_container#${t}`);i[0]&&i.remove();let r=$(`<div class="slider_container" id="${t}"><span>${e}:</span></div>`).appendTo("#sliders");return $('<div class="slider"></div>').appendTo(r)[0]}slider_event(e,t,i){this.sliders[e].min=t,this.sliders[e].max=i,this.sigma.refresh()}add_tree_slider(){let e="tree_slider",t=$(`div#${e}`);t[0]&&t.remove();let i=$(`<div id="${e}"><p>Cluster Tree</p></div>`).appendTo("body"),r=$('<div class="slider"></div>').appendTo(i),n=[],o=0;for(let e of this.state.tree.levels)n[o]=e,o++;n[o]="all";let s=n.length-1,a={};for(let e=0;e<n.length;e++){let t;t=0==e?"min":e==s?"max":100*e/s+"%",a[t]=e}noUiSlider.create(r[0],{start:[1],range:a,orientation:"vertical",tooltips:!0,snap:!0,pips:{mode:"range",density:100,format:{to:()=>""}},format:{to:e=>n[e],from:e=>n.indexOf(e)}}),r[0].noUiSlider.on("update",(e=>{this.state.tree.set_depth(n.indexOf(e[0]))}))}add_tree_buttons(){$("div#tree").show();let e=$("div#tree button#tree_up"),t=$("div#tree button#tree_down");e.on("click",(()=>{this.slow_down_clicks(f)&&this.state.tree.modify_depth(1)})),t.on("click",(()=>{this.slow_down_clicks(f)&&this.state.tree.modify_depth(-1)}))}slow_down_clicks(e){let t=Date.now();return!(this.last_click_time&&t-this.last_click_time<e||(this.last_click_time=t,0))}node_size(e,t){this.map_dimension(l,e,"size",u,t)}node_color(e,t){this.map_dimension(l,e,"color",d,t)}node_slider(e,t){this.slider(l,e,t)}edge_size(e,t){this.map_dimension(p,e,"size",u,t)}edge_color(e,t){this.map_dimension(p,e,"color",d,t)}edge_slider(e,t){this.slider(p,e,t)}slider(e,t,i){if(null!=this.sliders[i]){if(this.sliders[i][e]){let t=e==l?"node":"edge";return void console.error(`Extra instances of ${t} slider "${i}" were not added. Other ${t} sliders with the same name are already assigned.`)}if(this.sliders[i].data!==t)return void console.error(`${elem_name} slider "${i}" was not added. Its mapped data key does not match the first instance: ${first_key} =/= ${t}`);if(this.get_data_type(l,t)!==this.get_data_type(p,t))return void console.error(`${elem_name} slider "${i}" was not added. They data key "${t}" is not the same data type in both nodes and edges.`);this.sliders[i][e]=!0}else this.sliders[i]={[e]:!0,data:t};this.map_dimension(e,t,i,c)}cluster(e){this.state.tree.create_tree(e),this.add_tree_buttons()}import_config(e){if(void 0!==e&&void 0!==e.maps){var t=["node_size","node_color","node_slider","cluster","edge_size","edge_color","edge_slider"];for(let i of e.maps)t.includes(i.dimension)?null!=i.data?this[i.dimension](i.data,i.args):this[i.dimension](i.args):console.error(`Mapping dimension does not exist "${i.dimension}" does not exist. Possible dimensions are: ${t}`)}this.state.tree.created||this.state.tree.create_tree([]),this.state.tree.update_tree_attributes()}}class m extends t{constructor(e,t){super(e),this.state=e,this.mapper=t,this.trunk={},this.root_key="root",this.branch_map=new Map,this.depth_map=new Map,this.parent_map=new Map,this.height=0,this.depth=0,this.opened=new Map,this.cluster_cache={},this.levels=[],this.created=!1,this.state.tree=this,this.init()}init(){this.clear_trunk()}clear_trunk(){this.trunk.nodes=this.graph.nodes(),this.trunk.branches=[],this.trunk.depth=0,this.trunk.level=null,this.trunk.name=null,this.trunk.node_key=this.root_key}get_cluster(e){let t=this.branch_map.get(e),i=[];return null!=t.branches&&0!=t.branches.length&&(i=i.concat(t.branches.map((e=>e.node_key)))),null!=t.nodes&&0!=t.nodes.length&&(i=i.concat(t.nodes)),i}get_open_branches(){return Array.from(this.opened.keys())}add_levels(e){void 0===e&&(e=this.get_optimal_levels()),this.levels=[];for(let t of e)this.mapper.data.node[t]===d&&(this.add_level(t,this.trunk),this.levels.push(t),this.height++)}add_level(e,t){if(null==t.branches||0==t.branches.length){let{categories:i}=this.mapper.data_statistics(l,e,t.nodes);t.branches=[];let r=this.split_leaves(t.nodes,e,i);for(let[i,n]of Object.entries(r)){let r={parent:t.node_key,depth:t.depth+1,level:e,name:i,nodes:n,node_key:t.node_key+`-${e}-${i}`};t.nodes=[],t.branches.push(r)}}else for(let i of t.branches)this.add_level(e,i)}split_leaves(e,t,i){let r={};for(let e of i)r[e]=[];for(let i of e){let e=this.graph.getNodeAttributes(i);r[this.mapper.get_data(e,t)].push(i)}r.MISC=[];for(let[e,t]of Object.entries(r))1==t.length&&(r.MISC.push(t[0]),delete r[e]);return 0==r.MISC.length&&delete r.MISC,r}get_optimal_levels(){let e={};for(let[t,i]of Object.entries(this.mapper.data.node)){if(i!==d)continue;let r=this.mapper.data_statistics(l,t);r.categories.length>1&&(e[t]=r.categories.length)}return console.log("tree levels:",e),Object.keys(e).sort((function(t,i){return e[t]-e[i]}))}log_tree(){null!=this.levels&&0!=this.levels.length&&this.depth_map.forEach(((e,t)=>{if(0===t||t===this.height+1)return;let i=this.levels[t-1];console.log(i+": ",e)}))}add_new_node(e,t){this.graph.addNode(e,Object.assign({x:0,y:0,size:100,color:"#111111",data:{},sliders:{},tree:!0},t))}add_new_edge(e,t,i,r){this.graph.mergeUndirectedEdgeWithKey(e,t,i,Object.assign({size:1,color:"#111111",data:{},sliders:{},tree:!0},r))}create_maps(){this.branch_map=new Map,this.depth_map=new Map,this.parent_map=new Map,this.opened=new Map,this.update_branch_map(this.trunk),this.update_depth_map()}update_branch_map(e,t){if(this.branch_map.set(e.node_key,e),null!=e.branches)for(let t of e.branches)this.update_branch_map(t,e);if(this.parent_map.set(e.node_key,t?t.node_key:t),null!=e.nodes)for(let t of e.nodes)this.parent_map.set(t,e.node_key)}update_depth_map(){this.branch_map.forEach(((e,t)=>{this.depth_map.has(e.depth)?this.depth_map.get(e.depth).push(e.node_key):this.depth_map.set(e.depth,[e.node_key]),this.depth_map.has(e.depth+1)||this.depth_map.set(e.depth+1,[]);for(let t of e.nodes)this.depth_map.get(e.depth+1).push(t)}))}update_node_depth(){this.depth_map.forEach(((e,t)=>{for(let i of e)this.graph.setNodeAttribute(i,"depth",t)}))}remove_from_graph(){this.branch_map.forEach(((e,t)=>{this.graph.dropNode(t)}))}add_to_graph(e){let t={label:e.name,level:e.level,depth:e.depth,name:e.name};if(0==e.depth?(t.label="tree-root",t.size=0,t.hidden=!0,t.fixed=!0):t.data={[e.level]:e.name},this.add_new_node(e.node_key,t),null!=e.branches)for(let t of e.branches)this.add_to_graph(t)}update_branch_attributes(){let t=new Map;this.get_cluster_attributes(this.trunk.node_key,t),t.forEach(((t,i)=>{let r=Math.max(...t.sizes);this.graph.setNodeAttribute(i,"size",r);let n=e(t.colors);this.graph.setNodeAttribute(i,"color",n);let o={};for(let[e,i]of Object.entries(t.sliders)){let t=Math.min(...i),r=Math.max(...i);o[e]={min:t,max:r}}this.graph.setNodeAttribute(i,"sliders",o)}))}get_cluster_attributes(e,t){let i=this.branch_map.get(e),r=t.get(e)||{sizes:[],colors:[],sliders:{}};for(let e of Object.keys(this.mapper.sliders))this.mapper.sliders[e].node&&(r.sliders[e]=[]);if(null!=i.branches){for(let e of i.branches){this.get_cluster_attributes(e.node_key,t);let i=t.get(e.node_key);r.sizes=r.sizes.concat(i.sizes),r.colors=r.colors.concat(i.colors);for(let e of Object.keys(i.sliders))r.sliders[e]=r.sliders[e].concat(i.sliders[e])}t.set(e,r)}if(null!=i.nodes){for(let e of i.nodes){r.sizes.push(this.graph.getNodeAttribute(e,"size")),r.colors.push(this.graph.getNodeAttribute(e,"color"));for(let[t,i]of Object.entries(this.graph.getNodeAttribute(e,"sliders")))r.sliders[t].push(i)}t.set(e,r)}}update_branch_edges(){let t={};this.get_cluster_edges(t);for(let[r,n]of Object.entries(t)){this.graph.getNodeAttribute(r,"label");for(let[t,o]of Object.entries(n)){if(0===o.count)continue;this.graph.getNodeAttribute(t,"label");let n={tree:!0,count:o.count,color:e(o.colors),size:(i=o.sizes,i.reduce(((e,t)=>e+t),0)/i.length),sliders:{}};for(let[e,t]of Object.entries(o.sliders)){let i=Math.min(...t),r=Math.max(...t);n.sliders[e]={min:i,max:r}}this.add_new_edge(`${r}<->${t}`,r,t,n)}}var i}get_cluster_edges(e){var t={};for(let e of Object.keys(this.mapper.sliders))this.mapper.sliders[e].edge&&(t[e]=[]);for(let i=this.height;i>0;i--)for(let r of this.depth_map.get(i)){let n=this.branch_map.get(r);if(null!=n){e[r]={};for(let n of this.depth_map.get(i))r!==n&&void 0!==e[n]||(e[r][n]={count:0,colors:[],sizes:[],sliders:$.extend(!0,{},t)});if(null!=n.nodes){let t=new Set;for(let i of n.nodes)this.graph.forEachEdge(i,(n=>{if(!t.has(n)){let o=this.graph.getEdgeAttributes(n),s=this.graph.opposite(i,n),a=this.parent_map.get(s);if(void 0!==e[r][a]){e[r][a].count+=1,e[r][a].colors.push(o.color),e[r][a].sizes.push(o.size);for(let[t,i]of Object.entries(o.sliders))e[r][a].sliders[t].push(i)}t.add(n)}}))}if(null!=n.branches)for(let t of n.branches)for(let[i,n]of Object.entries(e[t.node_key])){let t=this.parent_map.get(i);if(void 0!==e[r][t]){e[r][t].count+=n.count,e[r][t].colors=e[r][t].colors.concat(n.colors),e[r][t].sizes=e[r][t].sizes.concat(n.sizes);for(let[i,o]of Object.entries(n.sliders))e[r][t].sliders[i]=e[r][t].sliders[i].concat(o)}}}}}update_tree_attributes(){this.update_branch_attributes(),this.update_branch_edges()}get_cluster_info(e){if(null==this.cluster_cache[e]){let i=new Set(this.get_cluster(e)),r=new Map,n=new Map,o=new Set,s=this.graph.nullCopy();var t=new y(this.state,s,e);for(let e of i){let i=this.graph.getNodeAttributes(e);t.graph.addNode(e,(({x:e,y:t,size:i})=>({x:e,y:t,size:i}))(i)),r.set(e,[]),n.set(e,0),this.graph.forEachEdge(e,(e=>{o.add(e)}))}for(let e of o){let n=this.graph.extremities(e);i.has(n[0])&&i.has(n[1])?(t.graph.addEdgeWithKey(e,n[1],n[0]),r.get(n[0]).push(e),r.get(n[1]).push(e)):o.delete(e)}t.graph=s,t.depth=this.branch_map.get(e).depth,t.update(),this.cluster_cache[e]=t}return this.cluster_cache[e]}create_tree(e){this.log("Creating Tree"),this.remove_from_graph(),this.clear_trunk(),this.cluster_cache={},this.add_levels(e),this.create_maps(),this.add_to_graph(this.trunk),this.update_tree_attributes(),this.update_node_depth(),this.log_tree(),this.sigma.refresh(),this.branch_map.forEach(((e,t)=>{this.open_node(t,!1)})),this.sigma.setCustomBBox(this.sigma.getBBox()),this.state.interaction.home_bbox=this.sigma.getCustomBBox(),this.close_node(this.root_key,!1),this.open_node(this.root_key,!1),this.sigma.refresh(),this.created=!0}set_depth(e,t=!0){if((e=Math.round(e))<0?e=0:e>this.height&&(e=this.height),this.depth=e,this.height>e)for(let i of this.depth_map.get(e+1))this.close_node(i,t);for(let i of this.depth_map.get(e))this.open_node(i,t)}modify_depth(e=1){this.set_depth(this.depth+e)}open_node(e,t=!0){null==this.opened.get(e)&&this.mapper.is_tree_node(e)&&(null!=this.branch_map.get(e).parent&&this.open_node(this.branch_map.get(e).parent,t),this.opened.set(e,this.get_cluster(e)),this.graph.setNodeAttribute(e,"out_of_tree",!0),this.get_cluster_info(e).expand(t))}close_node(e,t=!1){if(null!=this.opened.get(e)&&this.mapper.is_tree_node(e)){for(let i of this.opened.get(e))this.close_node(i,t);this.opened.delete(e),this.get_cluster_info(e).collapse(t)}}}class y{constructor(e,t,i){this.state=e,this.sigma=e.sigma,this.tree=e.tree,this.global_graph=e.tree.graph,this.graph=t,this.optimal_graph=null,this.degree_map=new Map,this.depth=this.global_graph.getNodeAttribute(i,"depth"),this.scale=this.state.simulation.scale(this.depth),this.parent=i,this.starting_local_positions={},this._cancel_animation=null,this._cancel_timeout=null}log(e,t=!1){let i=window.performance.now();if(t&&this.last_time){let t=i-this.last_time;console.log(`${e} (${t}ms)`)}else console.log(e);this.last_time=i}update(){this.optimal_graph=this.graph.copy();let e=2*Math.PI/this.graph.order,t=1/(100*this.scale),i=0;this.optimal_graph.updateEachNodeAttributes(((r,n)=>(n.x=t*Math.cos(e*i),n.y=t*Math.sin(e*i),i+=1,n))),this.state.simulation.simulate(this.optimal_graph,50,!0)}global_to_local(e,t=!0){let i=this.global_graph.getNodeAttributes(this.parent),r={};e||(e={},this.graph.forEachNode(((t,i)=>{e[t]=this.global_graph.getNodeAttributes(t)})));for(let[n,o]of Object.entries(e)){let e=(o.x-i.x)*this.scale,s=(o.y-i.y)*this.scale;r[n]={x:e,y:s},t&&this.graph.mergeNodeAttributes(n,{x:e,y:s})}return r}local_to_global(e,t=!0){let i=this.global_graph.getNodeAttributes(this.parent),r={};e||(e={},this.graph.forEachNode(((t,i)=>{e[t]=i})));for(let[n,o]of Object.entries(e)){let e=o.x/this.scale+i.x,s=o.y/this.scale+i.y;r[n]={x:e,y:s},t&&!this.tree.is_node_fixed(n)&&this.global_graph.mergeNodeAttributes(n,{x:e,y:s})}return r}set_animation(e){this._cancel_animation=e}set_timeout(e){this._cancel_timeout=()=>{clearTimeout(e)}}cancel_animation(){this._cancel_animation&&this._cancel_animation(),this._cancel_timeout&&this._cancel_timeout()}expand_start(){for(let e of this.graph.nodes())this.global_graph.setNodeAttribute(e,"fixed",!0),this.global_graph.setNodeAttribute(e,"out_of_tree",!1)}expand_stop(){for(let e of this.graph.nodes())this.global_graph.setNodeAttribute(e,"fixed",!1)}collapse_start(){for(let e of this.graph.nodes())this.global_graph.setNodeAttribute(e,"fixed",!0)}collapse_stop(){for(let e of this.graph.nodes())this.global_graph.setNodeAttribute(e,"fixed",!1),this.global_graph.setNodeAttribute(e,"out_of_tree",!0);this.global_graph.setNodeAttribute(this.parent,"out_of_tree",!1)}expand(e=!0){this.cancel_animation();let t=this.global_graph.getNodeAttributes(this.parent);for(let e of this.graph.nodes())this.global_graph.setNodeAttribute(e,"x",t.x),this.global_graph.setNodeAttribute(e,"y",t.y);if(this.graph=this.optimal_graph.copy(),this.expand_start(),e){let e=this.local_to_global(null,!1);this.set_animation=Animate.animateNodes(this.global_graph,e,{duration:f,easing:"quadraticOut"});let t=setTimeout((()=>{this.expand_stop()}),f);this.set_timeout(t)}else this.local_to_global(),this.expand_stop()}collapse(e=!0){this.cancel_animation();let t=this.global_graph.getNodeAttributes(this.parent),i={};for(let e of this.graph.nodes())i[e]={x:t.x,y:t.y};let r={};for(let e of this.graph.nodes())r[e]={x:0,y:0};if(this.collapse_start(),e){this.set_animation=Animate.animateNodes(this.global_graph,i,{duration:f,easing:"quadraticOut"});let e=setTimeout((()=>{this.collapse_stop()}),f);this.set_timeout(e)}else this.local_to_global(r,!0),this.collapse_stop()}}class b extends t{constructor(e){super(e),this.showing=!1,this.$menu_button=$("#settings-menu-button"),this.$menu=$("#settings-menu"),this.$help_button=$("button#help-button"),this.$help=$("div#help-container"),this.init()}create_menu(){this.add_checkbox("Show un-selected nodes","show_unfocused_nodes",!0,"When a node is selected, other nodes not directly connected to it will be visible but slightly desaturated."),this.add_checkbox("Show out-of-range nodes","show_out_of_range_nodes",!1,"When nodes are removed by a filter, keep them faintly visible."),this.add_checkbox("Advanced data menu","advanced_data",!1,"In the right-click menu, show all attributes of the node or edge. Mostly for debugging purposes."),this.add_checkbox("Smooth zooming","animate_zoom",!0,"Enables smooth zooming transitions.")}show_menu(){this.$menu.toggle(),this.showing=!this.showing}add_checkbox(e,t,i,r){let n=$("<div class='setting'></div>").appendTo(this.$menu),o=$(`<input type='checkbox' id='${t}'></input>`).appendTo(n),s=$(`<label for='${t}'>${e}</label>`).appendTo(n);this.add_tooltip(r,s),void 0===this.settings[t]&&(this.settings[t]=i),o[0].checked=this.settings[t],o.on("change",(e=>{this.settings[t]=o[0].checked,this.sigma.refresh()}))}add_tooltip(e,t){let i=$(`<span class='tooltip' style="display:none">${e}</span>`).appendTo(t);t.hover((e=>{i.show()}),(e=>{i.hide()}))}node_reducer(e,t){return this.is_out_of_range(t)&&(this.settings.show_out_of_range_nodes?this.obscure(t):this.hide(t)),t}edge_reducer(e,t){return t}init(){this.create_menu(),this.$menu_button.on("click",(()=>this.$menu.toggle())),this.$help.load("/help"),this.$help_button.on("click",(()=>this.$help.toggleClass("expanded")))}init_graph(){}}class v{constructor(){this.graph=new graphology.MultiUndirectedGraph,this.container=document.getElementById("sigma-container"),this.sigma=new sigma.Sigma(this.graph,this.container,{renderLabels:!1,renderEdgeLabels:!1,enableEdgeClickEvents:!0,enableEdgeWheelEvents:!0,enableEdgeHoverEvents:"debounce",zIndex:!0}),this.key_prefix="_",this.state={graph:this.graph,sigma:this.sigma,settings:{},tree:null,interaction:null,simulation:null},this.menu=new b(this.state),this.interact=new h(this.state),this.simulator=new n(this.state),this.mapper=new g(this.state),this.init()}init(){this.render()}render(){this.sigma.setSetting("nodeReducer",((e,t)=>(t=this.mapper.node_reducer(e,t),t=this.interact.node_reducer(e,t),this.menu.node_reducer(e,t)))),this.sigma.setSetting("edgeReducer",((e,t)=>(t=this.mapper.edge_reducer(e,t),t=this.interact.edge_reducer(e,t),this.menu.edge_reducer(e,t))))}error(e,t){this.interact.error(e,t)}import(e){if(null==e||null==e.graph)return void this.error("No graph data given.","Could not find the graph in the JSON data provided. See documentation for proper JSON structure.");let t=e.graph;for(let e of t.nodes)e.key=this.key_prefix+e.key;for(let e of t.edges)e.key=this.key_prefix+e.key,e.undirected=!0,e.source=this.key_prefix+e.source,e.target=this.key_prefix+e.target;this.graph.import(t),this.interact.init_graph(),this.simulator.init_graph(),this.mapper.init_graph(),this.menu.init_graph(),null==e.config&&console.log("No optional config found."),this.mapper.import_config(e.config)}}$(document).ready((function(){var e=window.location.pathname;e=e.substring(e.lastIndexOf("/")+1,e.length);var t=new v;$.ajax({url:"/get_graph/"+e,success:function(e){t.import(e)},error:function(e){let i=e.responseJSON;console.log("data",e),t.error(i.error,i.message)}})}))})()})();